# main.py
from fastapi import FastAPI, HTTPException, Depends, Header, Query
from fastapi.middleware.cors import CORSMiddleware
from fastapi.responses import HTMLResponse, JSONResponse
from pydantic import BaseModel
from pathlib import Path
from datetime import datetime, timedelta
import os
import itertools
import json
import google.generativeai as genai
from typing import Optional, List, Dict, Any

from database import init_db, get_connection
from create_key import create_key
from security import activation_required

# ---------- Init DB ----------
init_db()

# ---------- App ----------
app = FastAPI()

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# ---------- Admin Auth ----------
ADMIN_TOKEN = os.getenv("ADMIN_TOKEN", "")

def admin_auth(x_admin_token: str = Header(...)):
    if x_admin_token != ADMIN_TOKEN:
        raise HTTPException(status_code=401, detail="Unauthorized")

# ---------- Models ----------
class Req(BaseModel):
    prompt: str

class GenerateKeyReq(BaseModel):
    plan: str

class GenerateReportRequest(BaseModel):
    criterion_id: str
    subcategory_id: str
    report_id: str
    report_data: Dict[str, Any] = {}

# ---------- Plans ----------
PLANS = {
    "5min_1":   {"minutes": 5,    "usage": 1},
    "15min_2":  {"minutes": 15,   "usage": 2},
    "30min_3":  {"minutes": 30,   "usage": 3},
    "1day_6":   {"days": 1,       "usage": 6},
    "3day_15":  {"days": 3,       "usage": 15},
    "7day_25":  {"days": 7,       "usage": 25},
    "1m_45":    {"days": 30,      "usage": 45},
    "2m_65":    {"days": 60,      "usage": 65},
    "3m_120":   {"days": 90,      "usage": 120},
    "5m_200":   {"days": 150,     "usage": 200},
}

# ---------- Gemini Keys ----------
api_keys = [
    os.getenv("GEMINI_API_KEY_1"),
    os.getenv("GEMINI_API_KEY_2"),
    os.getenv("GEMINI_API_KEY_3"),
    os.getenv("GEMINI_API_KEY_4"),
    os.getenv("GEMINI_API_KEY_5"),
    os.getenv("GEMINI_API_KEY_6"),
    os.getenv("GEMINI_API_KEY_7"),
]
api_keys = [k for k in api_keys if k]
key_cycle = itertools.cycle(api_keys) if api_keys else None

def get_api_key():
    if not key_cycle:
        raise HTTPException(status_code=500, detail="No Gemini API key configured")
    return next(key_cycle)

# ============================================================================
# المعايير التربوية (11 معياراً)
# ============================================================================

CRITERIA = [
    {
        "id": "c1",
        "name": "أداء الواجبات الوظيفية",
        "weight": "10%",
        "order": 1
    },
    {
        "id": "c2",
        "name": "التفاعل مع المجتمع المهني",
        "weight": "10%",
        "order": 2
    },
    {
        "id": "c3",
        "name": "التفاعل مع أولياء الأمور",
        "weight": "10%",
        "order": 3
    },
    {
        "id": "c4",
        "name": "التنويع في استراتيجيات التدريس",
        "weight": "10%",
        "order": 4
    },
    {
        "id": "c5",
        "name": "تحسين نتائج المتعلمين",
        "weight": "10%",
        "order": 5
    },
    {
        "id": "c6",
        "name": "إعداد وتنفيذ خطة التعلم",
        "weight": "10%",
        "order": 6
    },
    {
        "id": "c7",
        "name": "توظيف تقنيات ووسائل التعليم المناسبة",
        "weight": "10%",
        "order": 7
    },
    {
        "id": "c8",
        "name": "تهيئة البيئة التعليمية",
        "weight": "5%",
        "order": 8
    },
    {
        "id": "c9",
        "name": "الإدارة الصفية",
        "weight": "5%",
        "order": 9
    },
    {
        "id": "c10",
        "name": "تحليل نتائج المتعلمين وتشخيص مستوياتهم",
        "weight": "10%",
        "order": 10
    },
    {
        "id": "c11",
        "name": "تنوع أساليب التقويم",
        "weight": "10%",
        "order": 11
    }
]

# ============================================================================
# التصنيفات الفرعية
# ============================================================================

SUBCATEGORIES = [
    # c1: أداء الواجبات الوظيفية
    {"id": "c1_s1", "criterion_id": "c1", "name": "يطبق الأنظمة وقواعد السلوك الوظيفية وأخلاقيات بيئة التعلم", "order": 1},
    {"id": "c1_s2", "criterion_id": "c1", "name": "حماية البيانات والمعلومات التي تتعلق بالعمل أو الأنشطة المهنية من الوصول غير المصرح به", "order": 2},
    {"id": "c1_s3", "criterion_id": "c1", "name": "التعاون مع المؤسسات الحكومية في المبادرات الوطنية", "order": 3},
    {"id": "c1_s4", "criterion_id": "c1", "name": "تنظيم أنشطة توعوية حول أهمية الانتماء الوطني", "order": 4},
    {"id": "c1_s5", "criterion_id": "c1", "name": "تنظيم أنشطة توعوية حول أهمية الانتماء (المدرسي والمجتمعي)", "order": 5},
    {"id": "c1_s6", "criterion_id": "c1", "name": "الامتثال للقوانين واللوائح وسياسات وإجراءات العمل", "order": 6},
    
    # c2: التفاعل مع المجتمع المهني
    {"id": "c2_s1", "criterion_id": "c2", "name": "حضور المؤتمرات والندوات التعليمية", "order": 1},
    {"id": "c2_s2", "criterion_id": "c2", "name": "المشاركة في ورش العمل التدريبية لتحسين المهارات التعليمية", "order": 2},
    {"id": "c2_s3", "criterion_id": "c2", "name": "الالتحاق ببرامج تدريبية لتعلم أساليب تدريس حديثة", "order": 3},
    {"id": "c2_s4", "criterion_id": "c2", "name": "الحصول على شهادات مهنية معتمدة في مجال التعليم", "order": 4},
    {"id": "c2_s5", "criterion_id": "c2", "name": "إطلاق مبادرات تعليمية لتحسين جودة التعليم", "order": 5},
    {"id": "c2_s6", "criterion_id": "c2", "name": "تقديم استشارات تربوية للمعلمين الجدد", "order": 6},
    {"id": "c2_s7", "criterion_id": "c2", "name": "تبادل الخبرات مع المعلمين في نفس التخصص أو تخصصات أخرى", "order": 7},
    {"id": "c2_s8", "criterion_id": "c2", "name": "التفكير الذاتي لتحسين الممارسات وبناء بيئة تعليمية تعزز التعلم المستمر", "order": 8},
    
    # c3: التفاعل مع أولياء الأمور
    {"id": "c3_s1", "criterion_id": "c3", "name": "تنظيم اجتماعات دورية مع أولياء الأمور لمناقشة تقدم الطلاب", "order": 1},
    {"id": "c3_s2", "criterion_id": "c3", "name": "إرسال تقارير منتظمة عن أداء الطلاب أكاديمياً وسلوكياً", "order": 2},
    {"id": "c3_s3", "criterion_id": "c3", "name": "استخدام وسائل التواصل الحديثة لإبقاء أولياء الأمور على اطلاع", "order": 3},
    {"id": "c3_s4", "criterion_id": "c3", "name": "الاستجابة والاستماع لملاحظات ومخاوف أولياء الأمور", "order": 4},
    {"id": "c3_s5", "criterion_id": "c3", "name": "تشجيع أولياء الأمور بالمشاركة في العملية التعليمية", "order": 5},
    
    # c4: التنويع في استراتيجيات التدريس
    {"id": "c4_s1", "criterion_id": "c4", "name": "استخدام التعلم النشط مثل المناقشات الجماعية والعروض التقديمية", "order": 1},
    {"id": "c4_s2", "criterion_id": "c4", "name": "تطبيق التعلم القائم على المشاريع لتعزيز الإبداع وحل المشكلات", "order": 2},
    {"id": "c4_s3", "criterion_id": "c4", "name": "استخدام استراتيجيات تنمية التفكير (التفكير الناقد، الإبداعي، العصف الذهني)", "order": 3},
    {"id": "c4_s4", "criterion_id": "c4", "name": "استخدام الوسائل البصرية والسمعية مثل الفيديوهات والصور", "order": 4},
    {"id": "c4_s5", "criterion_id": "c4", "name": "تطبيق استراتيجيات التعليم المتمايز لتناسب أنماط التعلم المختلفة", "order": 5},
    {"id": "c4_s6", "criterion_id": "c4", "name": "تطبيق استراتيجيات التعلم الحديثة (الصف المقلوب، الألعاب الإلكترونية، الرحلات المعرفية)", "order": 6},
    {"id": "c4_s7", "criterion_id": "c4", "name": "تطبيق التعلم التعاوني واستراتيجيات العمل الجماعي", "order": 7},
    
    # c5: تحسين نتائج المتعلمين
    {"id": "c5_s1", "criterion_id": "c5", "name": "تحديد أهداف ومعايير واضحة ليعرف المتعلمون ما يتوقع منهم تحقيقه", "order": 1},
    {"id": "c5_s2", "criterion_id": "c5", "name": "تقديم إفادة سريعة ومحددة فور ملاحظة الأداء", "order": 2},
    {"id": "c5_s3", "criterion_id": "c5", "name": "تكييف الإفادة وفق الاحتياجات الفردية للطلاب", "order": 3},
    {"id": "c5_s4", "criterion_id": "c5", "name": "تعزيز الثقة وتشجيع التطور من خلال ملاحظات تشجيعية", "order": 4},
    {"id": "c5_s5", "criterion_id": "c5", "name": "استخدام التكنولوجيا لتقديم الإفادة بطرق مبتكرة", "order": 5},
    
    # c6: إعداد وتنفيذ خطة التعلم
    {"id": "c6_s1", "criterion_id": "c6", "name": "وضع أهداف تعليمية واضحة وقابلة للقياس", "order": 1},
    {"id": "c6_s2", "criterion_id": "c6", "name": "تصميم خطة دراسية تتوافق مع المنهج الدراسي واحتياجات الطلاب", "order": 2},
    {"id": "c6_s3", "criterion_id": "c6", "name": "مراجعة الخطط بشكل دوري وتعديلها بناءً على نتائج الطلاب", "order": 3},
    {"id": "c6_s4", "criterion_id": "c6", "name": "مشاركة الخطط مع الزملاء للحصول على ملاحظات وتحسينها", "order": 4},
    {"id": "c6_s5", "criterion_id": "c6", "name": "تفهم الخصائص النفسية للمرحلة العمرية التي يقوم بتدريسها", "order": 5},
    
    # c7: توظيف تقنيات ووسائل التعليم المناسبة
    {"id": "c7_s1", "criterion_id": "c7", "name": "استخدام السبورات الذكية والأجهزة اللوحية في التدريس", "order": 1},
    {"id": "c7_s2", "criterion_id": "c7", "name": "تطبيق برامج التعلم الالكتروني مثل منصات التعليم عن بعد", "order": 2},
    {"id": "c7_s3", "criterion_id": "c7", "name": "تشجيع الطلاب على استخدام التطبيقات التعليمية لتعزيز التعلم الذاتي", "order": 3},
    {"id": "c7_s4", "criterion_id": "c7", "name": "تنظيم ورش العمل حول استخدام التكنولوجيا في التعليم", "order": 4},
    
    # c8: تهيئة البيئة التعليمية
    {"id": "c8_s1", "criterion_id": "c8", "name": "تزيين الفصل بوسائل تعليمية جذابة", "order": 1},
    {"id": "c8_s2", "criterion_id": "c8", "name": "تنظيم الفصل بشكل يسهل الحركة والتفاعل", "order": 2},
    {"id": "c8_s3", "criterion_id": "c8", "name": "توفير الأدوات والموارد التعليمية اللازمة", "order": 3},
    {"id": "c8_s4", "criterion_id": "c8", "name": "توفير بيئة تعليمية آمنة وخالية من الأخطار المادية", "order": 4},
    {"id": "c8_s5", "criterion_id": "c8", "name": "تمكين المتعلمين من التعبير عن أنفسهم ومشاركة أفكارهم", "order": 5},
    {"id": "c8_s6", "criterion_id": "c8", "name": "إثارة دافعية المتعلمين من خلال التنوع في أساليب التعلم", "order": 6},
    
    # c9: الإدارة الصفية
    {"id": "c9_s1", "criterion_id": "c9", "name": "وضع قواعد واضحة للسلوك في الصف", "order": 1},
    {"id": "c9_s2", "criterion_id": "c9", "name": "استخدام أساليب تحفيزية لتشجيع الطلاب على الالتزام", "order": 2},
    {"id": "c9_s3", "criterion_id": "c9", "name": "التعامل مع المشكلات السلوكية بشكل عادل وحازم", "order": 3},
    {"id": "c9_s4", "criterion_id": "c9", "name": "تنظيم الوقت بشكل فعال خلال الحصة", "order": 4},
    
    # c10: تحليل نتائج المتعلمين وتشخيص مستوياتهم
    {"id": "c10_s1", "criterion_id": "c10", "name": "استخدام اختبارات تقييمية دورية لقياس تقدم الطلاب", "order": 1},
    {"id": "c10_s2", "criterion_id": "c10", "name": "تحليل النتائج لتحديد نقاط القوة والضعف", "order": 2},
    {"id": "c10_s3", "criterion_id": "c10", "name": "توفير تغذية راجعة فردية للطلاب", "order": 3},
    {"id": "c10_s4", "criterion_id": "c10", "name": "تطبيق خطط علاجية للطلاب الذين يحتاجون إلى دعم", "order": 4},
    {"id": "c10_s5", "criterion_id": "c10", "name": "قياس التطبيق العملي للمعرفة عبر مواقف ومشاريع حقيقية", "order": 5},
    
    # c11: تنوع أساليب التقويم
    {"id": "c11_s1", "criterion_id": "c11", "name": "استخدام الاختبارات الكتابية والشفوية", "order": 1},
    {"id": "c11_s2", "criterion_id": "c11", "name": "تطبيق التقييم العملي من خلال المشاريع والعروض", "order": 2},
    {"id": "c11_s3", "criterion_id": "c11", "name": "استخدام التقييم التكويني لتتبع تقدم الطلاب", "order": 3},
    {"id": "c11_s4", "criterion_id": "c11", "name": "استخدام التقويم القبلي للوقوف على مدى استعداد المتعلمين", "order": 4},
    {"id": "c11_s5", "criterion_id": "c11", "name": "تطبيق التقويم الختامي لمعرفة مدى تحقق الأهداف", "order": 5}
]

# ============================================================================
# التقارير (أكثر من 1100 تقرير) - بعد إزالة التحيز للمواد الدراسية
# ============================================================================

REPORTS = [
    # ======================================================
    # c1_s1: يطبق الأنظمة وقواعد السلوك الوظيفية
    # ======================================================
    {"id": "r_c1_s1_001", "subcategory_id": "c1_s1", "name": "تقرير عن التزامي بارتداء الزي الوطني السعودي يومياً خلال الدوام الرسمي", "order": 1},
    {"id": "r_c1_s1_002", "subcategory_id": "c1_s1", "name": "توثيق لمهام الإشراف اليومي على الطابور الصباحي ومتابعة اصطفاف الطلاب", "order": 2},
    {"id": "r_c1_s1_003", "subcategory_id": "c1_s1", "name": "تقرير عن الإشراف على الفسحة المدرسية ومتابعة سلوك الطلاب وتوجيههم", "order": 3},
    {"id": "r_c1_s1_004", "subcategory_id": "c1_s1", "name": "توثيق جدول المناوبة نهاية اليوم الدراسي والإشراف على خروج الطلاب", "order": 4},
    {"id": "r_c1_s1_005", "subcategory_id": "c1_s1", "name": "تقرير عن الالتزام بالحضور قبل بداية الطابور الصباحي بخمس عشرة دقيقة", "order": 5},
    {"id": "r_c1_s1_006", "subcategory_id": "c1_s1", "name": "توثيق لتفعيل لائحة السلوك والمواظبة مع طالب كثير الغياب ومتابعته", "order": 6},
    {"id": "r_c1_s1_007", "subcategory_id": "c1_s1", "name": "تقرير عن الالتزام بالجدول الدراسي وعدم مغادرة الفصل أثناء الحصة", "order": 7},
    {"id": "r_c1_s1_008", "subcategory_id": "c1_s1", "name": "توثيق للمشاركة الفاعلة في اجتماعات مجلس المعلمين الأسبوعية", "order": 8},
    {"id": "r_c1_s1_009", "subcategory_id": "c1_s1", "name": "تقرير عن تطبيق تعليمات الاختبارات وعدم السماح بالغش داخل القاعة", "order": 9},
    {"id": "r_c1_s1_010", "subcategory_id": "c1_s1", "name": "توثيق للالتزام بتعبئة سجل متابعة الطلاب وتوثيق الملاحظات اليومية", "order": 10},

    # ======================================================
    # c1_s2: حماية البيانات والمعلومات
    # ======================================================
    {"id": "r_c1_s2_001", "subcategory_id": "c1_s2", "name": "تقرير عن تسليم كشوف الدرجات النهائية للإدارة في مظاريف مغلقة", "order": 1},
    {"id": "r_c1_s2_002", "subcategory_id": "c1_s2", "name": "توثيق لحفظ سجلات متابعة الطلاب في ملفات داخل خزانة مغلقة بالفصل", "order": 2},
    {"id": "r_c1_s2_003", "subcategory_id": "c1_s2", "name": "تقرير عن الالتزام بعدم تصوير أوراق الأسئلة أو نماذج الإجابة ونشرها", "order": 3},
    {"id": "r_c1_s2_004", "subcategory_id": "c1_s2", "name": "توثيق لاستخدام نظام نور بشكل آمن وتأمين كلمة المرور وعدم مشاركتها", "order": 4},
    {"id": "r_c1_s2_005", "subcategory_id": "c1_s2", "name": "تقرير عن إتلاف أوراق الاختبارات بعد انتهاء العام الدراسي بطريقة آمنة", "order": 5},
    {"id": "r_c1_s2_006", "subcategory_id": "c1_s2", "name": "توثيق لعدم مشاركة صور الطلاب أو نتائجهم على وسائل التواصل الاجتماعي", "order": 6},
    {"id": "r_c1_s2_007", "subcategory_id": "c1_s2", "name": "تقرير عن حفظ تقارير الطلاب ذوي المشكلات السلوكية في ملفات سرية", "order": 7},
    {"id": "r_c1_s2_008", "subcategory_id": "c1_s2", "name": "توثيق للتأكد من تسجيل الخروج من منصة مدرستي بعد الانتهاء من العمل", "order": 8},
    {"id": "r_c1_s2_009", "subcategory_id": "c1_s2", "name": "تقرير عن عدم ترك أوراق الدرجات أو كشوف الرصد على المكتب أمام الزوار", "order": 9},
    {"id": "r_c1_s2_010", "subcategory_id": "c1_s2", "name": "توثيق للتعامل مع سجلات الطلاب المحولة من التوجيه الطلابي بسرية تامة", "order": 10},

    # ======================================================
    # c1_s3: التعاون مع المؤسسات الحكومية
    # ======================================================
    {"id": "r_c1_s3_001", "subcategory_id": "c1_s3", "name": "تقرير عن المشاركة في تفعيل فعاليات اليوم الوطني السعودي بالمدرسة", "order": 1},
    {"id": "r_c1_s3_002", "subcategory_id": "c1_s3", "name": "توثيق لتفعيل برنامج رفق للإرشاد الطلابي بالتعاون مع وحدة الخدمات", "order": 2},
    {"id": "r_c1_s3_003", "subcategory_id": "c1_s3", "name": "تقرير عن تنظيم محاضرة توعوية عن أضرار التدخين مع مكافحة التدخين", "order": 3},
    {"id": "r_c1_s3_004", "subcategory_id": "c1_s3", "name": "توثيق لمشاركة المدرسة في حملة التبرع بالدم بالتعاون مع مستشفى المنطقة", "order": 4},
    {"id": "r_c1_s3_005", "subcategory_id": "c1_s3", "name": "تقرير عن استضافة الدفاع المدني لتدريب الطلاب على خطط الإخلاء", "order": 5},
    {"id": "r_c1_s3_006", "subcategory_id": "c1_s3", "name": "توثيق لمشاركتي في مبادرة السعودية الخضراء بزراعة شتلات في المدرسة", "order": 6},
    {"id": "r_c1_s3_007", "subcategory_id": "c1_s3", "name": "تقرير عن تفعيل برنامج فطن لتنمية المهارات الشخصية والاجتماعية", "order": 7},
    {"id": "r_c1_s3_008", "subcategory_id": "c1_s3", "name": "توثيق لتنظيم رحلة لطلاب الثانوي لزيارة معرض أمننا بمناسبة اليوم العالمي", "order": 8},
    {"id": "r_c1_s3_009", "subcategory_id": "c1_s3", "name": "تقرير عن المشاركة في حملة التوعية المرورية مع المرور السعودي", "order": 9},
    {"id": "r_c1_s3_010", "subcategory_id": "c1_s3", "name": "توثيق للتعاون مع هيئة الأمر بالمعروف في برامج الأمن الفكري", "order": 10},

    # ======================================================
    # c1_s4: تنظيم أنشطة توعوية عن الانتماء الوطني
    # ======================================================
    {"id": "r_c1_s4_001", "subcategory_id": "c1_s4", "name": "تقرير عن تفعيل الإذاعة المدرسية بكلمات عن حب الوطن في الطابور الصباحي", "order": 1},
    {"id": "r_c1_s4_002", "subcategory_id": "c1_s4", "name": "توثيق مسابقة فنية (رسم وتلوين) لطلاب الابتدائي عن معالم المملكة", "order": 2},
    {"id": "r_c1_s4_003", "subcategory_id": "c1_s4", "name": "تقرير عن تنظيم ندوة قصيرة لطلاب المتوسط عن رؤية 2030 وإنجازات الوطن", "order": 3},
    {"id": "r_c1_s4_004", "subcategory_id": "c1_s4", "name": "توثيق المشاركة في احتفالات المدرسة بيوم التأسيس", "order": 4},
    {"id": "r_c1_s4_005", "subcategory_id": "c1_s4", "name": "تقرير عن إعداد مجلة حائطية عن أئمة وملوك المملكة وإنجازاتهم", "order": 5},
    {"id": "r_c1_s4_006", "subcategory_id": "c1_s4", "name": "توثيق فعالية الزي الوطني بتشجيع الطلاب على ارتداء الزي السعودي", "order": 6},
    {"id": "r_c1_s4_007", "subcategory_id": "c1_s4", "name": "تقرير عن تنظيم مسابقة شعرية عن الوطنية لطلاب المرحلة الثانوية", "order": 7},
    {"id": "r_c1_s4_008", "subcategory_id": "c1_s4", "name": "توثيق لتنظيم رحلة مدرسية لزيارة متحف وطني أو معلم تاريخي", "order": 8},
    {"id": "r_c1_s4_009", "subcategory_id": "c1_s4", "name": "تقرير عن تخصيص حصة النشاط للحديث عن المناسبات الوطنية", "order": 9},
    {"id": "r_c1_s4_010", "subcategory_id": "c1_s4", "name": "توثيق لمشاركة الطلاب في ترديد النشيد الوطني بانضباط في الطابور", "order": 10},

    # ======================================================
    # c1_s5: تنظيم أنشطة توعوية عن الانتماء المدرسي والمجتمعي
    # ======================================================
    {"id": "r_c1_s5_001", "subcategory_id": "c1_s5", "name": "تقرير عن حث الطلاب على الحفاظ على نظافة المدرسة وفصولهم", "order": 1},
    {"id": "r_c1_s5_002", "subcategory_id": "c1_s5", "name": "توثيق فعالية أنا ساعد مدرستي لتجميل ساحة المدرسة", "order": 2},
    {"id": "r_c1_s5_003", "subcategory_id": "c1_s5", "name": "تقرير عن تنظيم برنامج ترحيب بالطلاب المستجدين في الصف الأول الابتدائي", "order": 3},
    {"id": "r_c1_s5_004", "subcategory_id": "c1_s5", "name": "توثيق مسابقة أفضل فصل لتعزيز روح الانتماء للمكان", "order": 4},
    {"id": "r_c1_s5_005", "subcategory_id": "c1_s5", "name": "تقرير عن تخصيص حصة للحديث عن تاريخ المدرسة وإنجازاتها السابقة", "order": 5},
    {"id": "r_c1_s5_006", "subcategory_id": "c1_s5", "name": "توثيق مشاركة الطلاب في الإذاعة المدرسية لتعزيز ثقتهم وانتمائهم", "order": 6},
    {"id": "r_c1_s5_007", "subcategory_id": "c1_s5", "name": "تقرير عن تنظيم حملة توعوية عن احترام المعلم والعاملين في المدرسة", "order": 7},
    {"id": "r_c1_s5_008", "subcategory_id": "c1_s5", "name": "توثيق فعالية تعزيز الهوية من خلال الأزياء الشعبية في المناسبات", "order": 8},
    {"id": "r_c1_s5_009", "subcategory_id": "c1_s5", "name": "تقرير عن تشجيع الطلاب على المشاركة في أعمال تطوعية لخدمة الحي", "order": 9},
    {"id": "r_c1_s5_010", "subcategory_id": "c1_s5", "name": "توثيق لبرنامج توجيهي عن أهمية احترام ممتلكات المدرسة العامة", "order": 10},

    # ======================================================
    # c1_s6: الامتثال للقوانين واللوائح
    # ======================================================
    {"id": "r_c1_s6_001", "subcategory_id": "c1_s6", "name": "تقرير عن تطبيق سياسة منع الغش في الاختبارات كما هو منصوص عليه", "order": 1},
    {"id": "r_c1_s6_002", "subcategory_id": "c1_s6", "name": "توثيق للإجراءات المتبعة أثناء مناوبة نهاية اليوم لضمان سلامة الخروج", "order": 2},
    {"id": "r_c1_s6_003", "subcategory_id": "c1_s6", "name": "تقرير عن تطبيق خطة الإخلاء في حالات الطوارئ والتدريب عليها مع الطلاب", "order": 3},
    {"id": "r_c1_s6_004", "subcategory_id": "c1_s6", "name": "توثيق للالتزام بسياسة استقبال أولياء الأمور في الأوقات المخصصة فقط", "order": 4},
    {"id": "r_c1_s6_005", "subcategory_id": "c1_s6", "name": "تقرير عن تطبيق لائحة تقويم الطالب في رصد الدرجات", "order": 5},
    {"id": "r_c1_s6_006", "subcategory_id": "c1_s6", "name": "توثيق للامتثال لإجراءات التعامل مع الطلاب ذوي الإعاقة داخل الفصل", "order": 6},
    {"id": "r_c1_s6_007", "subcategory_id": "c1_s6", "name": "تقرير عن تطبيق إجراءات السلامة في المعامل والفصول الدراسية", "order": 7},
    {"id": "r_c1_s6_008", "subcategory_id": "c1_s6", "name": "توثيق للالتزام بسياسة الإجازات المرضية وتقديم التقارير الرسمية", "order": 8},
    {"id": "r_c1_s6_009", "subcategory_id": "c1_s6", "name": "تقرير عن تطبيق تعليمات الاختبارات وعدم مغادرة قاعة الاختبار", "order": 9},
    {"id": "r_c1_s6_010", "subcategory_id": "c1_s6", "name": "توثيق للالتزام بإجراءات تسليم المقررات الدراسية في بداية العام", "order": 10},

    # ======================================================
    # c2_s1: حضور المؤتمرات والندوات التعليمية
    # ======================================================
    {"id": "r_c2_s1_001", "subcategory_id": "c2_s1", "name": "شهادة حضور لندوة التعليم في العصر الرقمي التي أقامتها إدارة التعليم", "order": 1},
    {"id": "r_c2_s1_002", "subcategory_id": "c2_s1", "name": "تقرير عن مشاركتي في المؤتمر الافتراضي تطوير مهارات المعلمين", "order": 2},
    {"id": "r_c2_s1_003", "subcategory_id": "c2_s1", "name": "حضور ندوة استراتيجيات التعامل مع المراهقين في مركز التدريب التربوي", "order": 3},
    {"id": "r_c2_s1_004", "subcategory_id": "c2_s1", "name": "تقرير عن استفادتي من ندوة التقييم من أجل التعلم وتطبيق أفكارها", "order": 4},
    {"id": "r_c2_s1_005", "subcategory_id": "c2_s1", "name": "شهادة حضور المؤتمر السنوي الأول للمدرسة", "order": 5},
    {"id": "r_c2_s1_006", "subcategory_id": "c2_s1", "name": "تقرير عن مشاركتي في ندوة تعريفية عن المناهج المطورة", "order": 6},
    {"id": "r_c2_s1_007", "subcategory_id": "c2_s1", "name": "حضور فعاليات اليوم العالمي للمعلم على مستوى الحي", "order": 7},
    {"id": "r_c2_s1_008", "subcategory_id": "c2_s1", "name": "تقرير عن حضور ندوة عبر الإنترنت حول الذكاء العاطفي للمعلم", "order": 8},
    {"id": "r_c2_s1_009", "subcategory_id": "c2_s1", "name": "شهادة حضور مؤتمر الصحة النفسية للطلاب في الجامعة", "order": 9},
    {"id": "r_c2_s1_010", "subcategory_id": "c2_s1", "name": "تقرير عن المشاركة في ندوة المواطنة الرقمية المقدمة من وزارة التعليم", "order": 10},

    # ======================================================
    # c2_s2: المشاركة في ورش العمل التدريبية
    # ======================================================
    {"id": "r_c2_s2_001", "subcategory_id": "c2_s2", "name": "شهادة حضور ورشة عمل صناعة الوسائل التعليمية من الخامات البيئية", "order": 1},
    {"id": "r_c2_s2_002", "subcategory_id": "c2_s2", "name": "تقرير عن مشاركتي في ورشة إدارة الصف بفاعلية", "order": 2},
    {"id": "r_c2_s2_003", "subcategory_id": "c2_s2", "name": "حضور ورشة عمل تصميم الاختبارات الإلكترونية على منصة مدرستي", "order": 3},
    {"id": "r_c2_s2_004", "subcategory_id": "c2_s2", "name": "تقرير عن ورشة تنمية مهارات التفكير الناقد عند الطلاب", "order": 4},
    {"id": "r_c2_s2_005", "subcategory_id": "c2_s2", "name": "شهادة حضور ورشة عمل مهارات التعامل مع صعوبات التعلم", "order": 5},
    {"id": "r_c2_s2_006", "subcategory_id": "c2_s2", "name": "تقرير عن تطبيقي لاستراتيجيات تعلمتها من ورشة التعلم باللعب مع الطلاب", "order": 6},
    {"id": "r_c2_s2_007", "subcategory_id": "c2_s2", "name": "حضور ورشة عمل إعداد خطط علاجية للطلاب المتعثرين", "order": 7},
    {"id": "r_c2_s2_008", "subcategory_id": "c2_s2", "name": "تقرير عن ورشة فن الإلقاء والعرض التقديمي للمعلم", "order": 8},
    {"id": "r_c2_s2_009", "subcategory_id": "c2_s2", "name": "شهادة حضور ورشة أمن المعلومات في المنظومة التعليمية", "order": 9},
    {"id": "r_c2_s2_010", "subcategory_id": "c2_s2", "name": "حضور ورشة أنشطة تقوية مهارات القراءة والكتابة للصفوف الأولية", "order": 10},

    # ======================================================
    # c2_s3: الالتحاق ببرامج تدريبية
    # ======================================================
    {"id": "r_c2_s3_001", "subcategory_id": "c2_s3", "name": "شهادة اجتياز برنامج التعلم القائم على المشروعات عبر منصة دروب", "order": 1},
    {"id": "r_c2_s3_002", "subcategory_id": "c2_s3", "name": "تقرير عن إكمال دورة استراتيجيات التعلم النشط في أكاديمية المعلم", "order": 2},
    {"id": "r_c2_s3_003", "subcategory_id": "c2_s3", "name": "شهادة حضور برنامج تدريبي عن تطبيقات الذكاء الاصطناعي في التعليم", "order": 3},
    {"id": "r_c2_s3_004", "subcategory_id": "c2_s3", "name": "تقرير عن التحاقي ببرنامج التقويم البديل (ملف الإنجاز) عبر التدريب عن بعد", "order": 4},
    {"id": "r_c2_s3_005", "subcategory_id": "c2_s3", "name": "شهادة اجتياز برنامج الصف المقلوب وأثره في التحصيل الدراسي", "order": 5},
    {"id": "r_c2_s3_006", "subcategory_id": "c2_s3", "name": "تقرير عن تطبيقي لأسلوب التلعيب في التدريس بعد حضوري دورة متخصصة", "order": 6},
    {"id": "r_c2_s3_007", "subcategory_id": "c2_s3", "name": "شهادة حضور برنامج الوعي الصوتي لمعلمي الصفوف الأولية", "order": 7},
    {"id": "r_c2_s3_008", "subcategory_id": "c2_s3", "name": "تقرير عن دورة المهارات القيادية للمعلم داخل الفصل", "order": 8},
    {"id": "r_c2_s3_009", "subcategory_id": "c2_s3", "name": "شهادة برنامج تدريبي عن أنماط التعلم (VARK) وكيفية مراعاتها", "order": 9},
    {"id": "r_c2_s3_010", "subcategory_id": "c2_s3", "name": "تقرير عن الاستفادة من برنامج تحسين المهارات اللغوية", "order": 10},

    # ======================================================
    # c2_s4: الحصول على شهادات مهنية معتمدة
    # ======================================================
    {"id": "r_c2_s4_001", "subcategory_id": "c2_s4", "name": "شهادة (IC3) في أساسيات الحاسب الآلي وتطبيقاته", "order": 1},
    {"id": "r_c2_s4_002", "subcategory_id": "c2_s4", "name": "شهادة (EF SET) أو (IELTS) لمستوى اللغة الإنجليزية", "order": 2},
    {"id": "r_c2_s4_003", "subcategory_id": "c2_s4", "name": "شهادة معتمدة في تأهيل المعلمين", "order": 3},
    {"id": "r_c2_s4_004", "subcategory_id": "c2_s4", "name": "تقرير عن الحصول على شهادة المعلم الخبير من إحدى المؤسسات التدريبية", "order": 4},
    {"id": "r_c2_s4_005", "subcategory_id": "c2_s4", "name": "شهادة في إدارة الصفوف الافتراضية من منصة مدرستي", "order": 5},
    {"id": "r_c2_s4_006", "subcategory_id": "c2_s4", "name": "شهادة أساسيات التوجيه المهني والإرشاد الطلابي", "order": 6},
    {"id": "r_c2_s4_007", "subcategory_id": "c2_s4", "name": "شهادة دبلومة التأهيل التربوي من إحدى الكليات", "order": 7},
    {"id": "r_c2_s4_008", "subcategory_id": "c2_s4", "name": "شهادة معتمدة في صعوبات التعلم النمائية", "order": 8},
    {"id": "r_c2_s4_009", "subcategory_id": "c2_s4", "name": "شهادة تصميم وإنتاج المحتوى الرقمي التفاعلي", "order": 9},
    {"id": "r_c2_s4_010", "subcategory_id": "c2_s4", "name": "شهادة اجتياز اختبار الرخصة المهنية", "order": 10},

    # ======================================================
    # c2_s5: إطلاق مبادرات تعليمية
    # ======================================================
    {"id": "r_c2_s5_001", "subcategory_id": "c2_s5", "name": "تقرير عن إطلاق مبادرة قارئ الشهر لتشجيع القراءة الحرة بين الطلاب", "order": 1},
    {"id": "r_c2_s5_002", "subcategory_id": "c2_s5", "name": "توثيق مبادرة مصححون صغار لتصحيح أخطاء بعضهم البعض", "order": 2},
    {"id": "r_c2_s5_003", "subcategory_id": "c2_s5", "name": "تقرير عن مبادرتي لتبسيط المصطلحات وتقريب المفاهيم للطلاب", "order": 3},
    {"id": "r_c2_s5_004", "subcategory_id": "c2_s5", "name": "توثيق مبادرة منصة للتفوق لمشاركة ملخصات الدروس للطلاب المتغيبين", "order": 4},
    {"id": "r_c2_s5_005", "subcategory_id": "c2_s5", "name": "تقرير عن مبادرة فصل بلا غياب بالتعاون مع طلاب الصف", "order": 5},
    {"id": "r_c2_s5_006", "subcategory_id": "c2_s5", "name": "توثيق مبادرة لتحسين الخط وتحسين جودة الكتابة", "order": 6},
    {"id": "r_c2_s5_007", "subcategory_id": "c2_s5", "name": "تقرير عن إطلاق مبادرة سفراء الأمن لتعزيز السلامة في المدرسة", "order": 7},
    {"id": "r_c2_s5_008", "subcategory_id": "c2_s5", "name": "توثيق مبادرة المرشد الصغير لمساعدة الطلاب الجدد على الاندماج", "order": 8},
    {"id": "r_c2_s5_009", "subcategory_id": "c2_s5", "name": "تقرير عن مبادرة ورشة إبداع لطلاب الموهوبين داخل الفصل", "order": 9},
    {"id": "r_c2_s5_010", "subcategory_id": "c2_s5", "name": "توثيق مبادرة التعلم التشاركي حيث يطرح الطلاب أسئلة لبعضهم", "order": 10},

    # ======================================================
    # c2_s6: تقديم استشارات تربوية للمعلمين الجدد
    # ======================================================
    {"id": "r_c2_s6_001", "subcategory_id": "c2_s6", "name": "تقرير عن لقاء تعريفي للمعلمين الجدد بسياسة المدرسة ونظام التعامل مع الطلاب", "order": 1},
    {"id": "r_c2_s6_002", "subcategory_id": "c2_s6", "name": "توثيق لاجتماعي مع معلم جديد لمساعدته في إعداد خطة تحضير أسبوعية", "order": 2},
    {"id": "r_c2_s6_003", "subcategory_id": "c2_s6", "name": "تقرير عن مشاركتي خبرتي في كيفية إدارة وقت الحصة مع معلم حديث", "order": 3},
    {"id": "r_c2_s6_004", "subcategory_id": "c2_s6", "name": "توثيق لمساعدة معلم جديد في استخدام منصة مدرستي لرفع الدرجات", "order": 4},
    {"id": "r_c2_s6_005", "subcategory_id": "c2_s6", "name": "تقرير عن توجيه معلم جديد في كيفية التعامل مع ولي أمر غاضب", "order": 5},
    {"id": "r_c2_s6_006", "subcategory_id": "c2_s6", "name": "توثيق لحضوري حصة لمعلم جديد وتقديم تغذية راجعة بناءة له", "order": 6},
    {"id": "r_c2_s6_007", "subcategory_id": "c2_s6", "name": "تقرير عن إرشاد معلم جديد لطرق تشجيع الطلاب الخجولين على المشاركة", "order": 7},
    {"id": "r_c2_s6_008", "subcategory_id": "c2_s6", "name": "توثيق لشرح آلية التعامل مع الطلاب ذوي فرط الحركة لمعلم مستجد", "order": 8},
    {"id": "r_c2_s6_009", "subcategory_id": "c2_s6", "name": "تقرير عن لقاء غير رسمي (مجلس معلمين) لتبادل الخبرات مع الزملاء الجدد", "order": 9},
    {"id": "r_c2_s6_010", "subcategory_id": "c2_s6", "name": "توثيق مساهمتي في إعداد دليل إرشادي للمعلم الجديد في المدرسة", "order": 10},

    # ======================================================
    # c2_s7: تبادل الخبرات مع المعلمين
    # ======================================================
    {"id": "r_c2_s7_001", "subcategory_id": "c2_s7", "name": "تقرير عن اجتماع فريق المواد الدراسية لمناقشة خطة تدريس موحدة", "order": 1},
    {"id": "r_c2_s7_002", "subcategory_id": "c2_s7", "name": "توثيق لتبادل نماذج أسئلة اختبارات مع معلم في مدرسة أخرى", "order": 2},
    {"id": "r_c2_s7_003", "subcategory_id": "c2_s7", "name": "تقرير عن مشاركتي استراتيجية ناجحة في التدريس مع زملائي", "order": 3},
    {"id": "r_c2_s7_004", "subcategory_id": "c2_s7", "name": "توثيق لقاء مع معلم تربية فنية لتصميم وسيلة تعليمية مشتركة", "order": 4},
    {"id": "r_c2_s7_005", "subcategory_id": "c2_s7", "name": "تقرير عن التعاون مع معلم الحاسب لتصميم اختبار إلكتروني تفاعلي", "order": 5},
    {"id": "r_c2_s7_006", "subcategory_id": "c2_s7", "name": "توثيق لحلقة نقاش مع معلمي الصفوف الأولية حول تحسين القراءة", "order": 6},
    {"id": "r_c2_s7_007", "subcategory_id": "c2_s7", "name": "تقرير عن مشاركتي في مجموعة (واتساب) خاصة بمعلمي التخصص لتبادل الخبرات", "order": 7},
    {"id": "r_c2_s7_008", "subcategory_id": "c2_s7", "name": "توثيق لزيارة صفية لمعلم متميز في المدرسة للاستفادة من أسلوبه", "order": 8},
    {"id": "r_c2_s7_009", "subcategory_id": "c2_s7", "name": "تقرير عن ورشة داخلية قمت بتقديمها لزملائي عن استخدام السبورة الذكية", "order": 9},
    {"id": "r_c2_s7_010", "subcategory_id": "c2_s7", "name": "توثيق لتبادل مصادر تعليمية (فيديو، صور) مع المعلمين", "order": 10},

    # ======================================================
    # c2_s8: التفكير الذاتي لتحسين الممارسات
    # ======================================================
    {"id": "r_c2_s8_001", "subcategory_id": "c2_s8", "name": "تقرير أسبوعي شخصي (مذكرة تأملات) عن أنجح الحصص والأخطاء التي وقعت فيها", "order": 1},
    {"id": "r_c2_s8_002", "subcategory_id": "c2_s8", "name": "توثيق لتسجيل فيديو لحصة دراسية ومشاهدتها لاحقًا لتقييم أدائي", "order": 2},
    {"id": "r_c2_s8_003", "subcategory_id": "c2_s8", "name": "تقرير عن ملاحظاتي الذاتية على أداء الطلاب في الاختبار القصير وسبب تدني درجاتهم", "order": 3},
    {"id": "r_c2_s8_004", "subcategory_id": "c2_s8", "name": "توثيق لخطة شخصية قمت بإعدادها لتطوير مهارة معينة لدي (مثل إدارة الصف)", "order": 4},
    {"id": "r_c2_s8_005", "subcategory_id": "c2_s8", "name": "تقرير عن قراءة كتاب تربوي وتدوين كيف سيساعدني في تطوير أسلوبي", "order": 5},
    {"id": "r_c2_s8_006", "subcategory_id": "c2_s8", "name": "توثيق لاستبيان رأي بسيط للطلاب عن حصتي وطريقة شرحي", "order": 6},
    {"id": "r_c2_s8_007", "subcategory_id": "c2_s8", "name": "تقرير عن تعديل استراتيجية تدريسية بعد شعوري بعدم مناسبتها للمستوى العمري", "order": 7},
    {"id": "r_c2_s8_008", "subcategory_id": "c2_s8", "name": "توثيق لأهدافي المهنية للسنة القادمة بناء على تحديّات هذا العام", "order": 8},
    {"id": "r_c2_s8_009", "subcategory_id": "c2_s8", "name": "تقرير عن مراجعة خططي السابقة وتحديد ما يمكن تحسينه", "order": 9},
    {"id": "r_c2_s8_010", "subcategory_id": "c2_s8", "name": "توثيق لتحديد نقاط ضعف لدي والعمل على حلها من خلال دورات تدريبية", "order": 10},

    # ======================================================
    # c3_s1: تنظيم اجتماعات دورية مع أولياء الأمور
    # ======================================================
    {"id": "r_c3_s1_001", "subcategory_id": "c3_s1", "name": "تقرير عن عقد لقاء فردي مع ولي أمر طالب متميز لمناقشة سبل دعمه", "order": 1},
    {"id": "r_c3_s1_002", "subcategory_id": "c3_s1", "name": "توثيق لمشاركتي في مجلس الآباء والمعلمين الفصلي", "order": 2},
    {"id": "r_c3_s1_003", "subcategory_id": "c3_s1", "name": "تقرير عن اجتماع عاجل مع ولي أمر طالب يعاني من صعوبات في التعلم", "order": 3},
    {"id": "r_c3_s1_004", "subcategory_id": "c3_s1", "name": "توثيق لدعوة أولياء الأمور لحضور معرض إنجازات الطلاب", "order": 4},
    {"id": "r_c3_s1_005", "subcategory_id": "c3_s1", "name": "تقرير عن تنظيم لقاء مفتوح لشرح خطة الفصل الدراسي الثاني لأولياء الأمور", "order": 5},
    {"id": "r_c3_s1_006", "subcategory_id": "c3_s1", "name": "توثيق اجتماع هاتفي مع ولي أمر طالب متغيب لتدارك الأمر", "order": 6},
    {"id": "r_c3_s1_007", "subcategory_id": "c3_s1", "name": "تقرير عن حوار مع ولي أمر طالب موهوب لتوفير أنشطة إثرائية له", "order": 7},
    {"id": "r_c3_s1_008", "subcategory_id": "c3_s1", "name": "توثيق لقاء مع أولياء أمور فصل كامل لمناقشة نتائج الاختبارات", "order": 8},
    {"id": "r_c3_s1_009", "subcategory_id": "c3_s1", "name": "تقرير عن اجتماع لمناقشة مشكلة سلوكية جماعية", "order": 9},
    {"id": "r_c3_s1_010", "subcategory_id": "c3_s1", "name": "توثيق للقاء ختامي مع أولياء الأمور لمناقشة التقرير السنوي للطالب", "order": 10},

    # ======================================================
    # c3_s2: إرسال تقارير منتظمة عن أداء الطلاب
    # ======================================================
    {"id": "r_c3_s2_001", "subcategory_id": "c3_s2", "name": "نموذج من تقرير شهري أرسلته لأولياء الأمور عن درجات الواجبات", "order": 1},
    {"id": "r_c3_s2_002", "subcategory_id": "c3_s2", "name": "تقرير أسبوعي عن السلوك العام للطالب عبر استمارة متابعة في دفتر الواجبات", "order": 2},
    {"id": "r_c3_s2_003", "subcategory_id": "c3_s2", "name": "توثيق لإشعار (إيجابي) أرسلته لولي الأمر عن تميز ابنه في النشاط", "order": 3},
    {"id": "r_c3_s2_004", "subcategory_id": "c3_s2", "name": "نموذج من بطاقة متابعة المهارات الأساسية للطلاب", "order": 4},
    {"id": "r_c3_s2_005", "subcategory_id": "c3_s2", "name": "تقرير عن إرسال كشف بنتائج الاختبارات القصيرة (شهرية) عبر البريد الإلكتروني", "order": 5},
    {"id": "r_c3_s2_006", "subcategory_id": "c3_s2", "name": "توثيق لتقرير سلوكي عن تحسن طالب كان كثير المشاكل", "order": 6},
    {"id": "r_c3_s2_007", "subcategory_id": "c3_s2", "name": "نموذج من إشعار ضعف لطلب دعم ولي الأمر في المادة الدراسية", "order": 7},
    {"id": "r_c3_s2_008", "subcategory_id": "c3_s2", "name": "تقرير عن إرسال خطة علاجية لولي الأمر لتطبيقها في المنزل", "order": 8},
    {"id": "r_c3_s2_009", "subcategory_id": "c3_s2", "name": "توثيق لبطاقة إنجاز أسبوعية للطلاب الضعاف لرفع معنوياتهم واطلاع أولياء أمورهم", "order": 9},
    {"id": "r_c3_s2_010", "subcategory_id": "c3_s2", "name": "تقرير فصلي مختوم من الإدارة عن مستوى الطالب", "order": 10},

    # ======================================================
    # c3_s3: استخدام وسائل التواصل الحديثة
    # ======================================================
    {"id": "r_c3_s3_001", "subcategory_id": "c3_s3", "name": "تقرير عن تفعيل مجموعة (واتساب) خاصة بالفصل للتنبيهات اليومية", "order": 1},
    {"id": "r_c3_s3_002", "subcategory_id": "c3_s3", "name": "توثيق لاستخدام خاصية الإشعارات في نظام (نور) أو (مدرستي) لإرسال التنبيهات", "order": 2},
    {"id": "r_c3_s3_003", "subcategory_id": "c3_s3", "name": "تقرير عن استخدام البريد الإلكتروني لإرسال ملفات تفاعلية لدعم الطلاب", "order": 3},
    {"id": "r_c3_s3_004", "subcategory_id": "c3_s3", "name": "توثيق للتواصل عبر تطبيق (توكلنا) للاستفسار عن حالة الطالب الصحية", "order": 4},
    {"id": "r_c3_s3_005", "subcategory_id": "c3_s3", "name": "تقرير عن إنشاء قناة على (تليجرام) لنشر ملخصات الدروس والفيديوهات التعليمية", "order": 5},
    {"id": "r_c3_s3_006", "subcategory_id": "c3_s3", "name": "توثيق لاستخدام استبيانات (جوجل فورم) لاستطلاع رأي أولياء الأمور", "order": 6},
    {"id": "r_c3_s3_007", "subcategory_id": "c3_s3", "name": "تقرير عن التواصل الفردي عبر الرسائل النصية القصيرة (SMS)", "order": 7},
    {"id": "r_c3_s3_008", "subcategory_id": "c3_s3", "name": "توثيق لمشاركة صور الأنشطة الصفية مع أولياء الأمور عبر تطبيقات آمنة", "order": 8},
    {"id": "r_c3_s3_009", "subcategory_id": "c3_s3", "name": "تقرير عن الرد على استفسارات أولياء الأمور عبر خاصية الدردشة في منصة المدرسة", "order": 9},
    {"id": "r_c3_s3_010", "subcategory_id": "c3_s3", "name": "توثيق لاستخدام تقويم جوجل لمشاركة أولياء الأمور بمواعيد الاختبارات الهامة", "order": 10},

    # ======================================================
    # c3_s4: الاستجابة والاستماع لملاحظات أولياء الأمور
    # ======================================================
    {"id": "r_c3_s4_001", "subcategory_id": "c3_s4", "name": "تقرير عن استقبال شكوى ولي أمر حول صعوبة المادة ومناقشتها معه", "order": 1},
    {"id": "r_c3_s4_002", "subcategory_id": "c3_s4", "name": "توثيق لملاحظة ولي أمر عن تنمر طالب على ابنه واتخاذ الإجراءات المناسبة", "order": 2},
    {"id": "r_c3_s4_003", "subcategory_id": "c3_s4", "name": "تقرير عن اجتماع مع ولي أمر استجبت فيه لطلبه بتغيير طريقة التواصل مع ابنه", "order": 3},
    {"id": "r_c3_s4_004", "subcategory_id": "c3_s4", "name": "توثيق لتعاوني مع ولي أمر طالب يعاني من قلق الاختبارات ووضع خطة تهدئة", "order": 4},
    {"id": "r_c3_s4_005", "subcategory_id": "c3_s4", "name": "تقرير عن تعديل موعد تسليم واجب ثقيل بعد استفسار مجموعة من أولياء الأمور", "order": 5},
    {"id": "r_c3_s4_006", "subcategory_id": "c3_s4", "name": "توثيق لمناقشة ولي أمر حول طريقة الشرح وتوضيح الهدف منها", "order": 6},
    {"id": "r_c3_s4_007", "subcategory_id": "c3_s4", "name": "تقرير عن استقبال اقتراح ولي أمر لرحلة مدرسية وأخذ رأي الإدارة فيه", "order": 7},
    {"id": "r_c3_s4_008", "subcategory_id": "c3_s4", "name": "توثيق لحل مشكلة سوء فهم بين الطالب والمعلم بالتعاون مع ولي الأمر", "order": 8},
    {"id": "r_c3_s4_009", "subcategory_id": "c3_s4", "name": "تقرير عن استفسار ولي أمر عن سر تأخر ابنه الدراسي وتقديم خطة دعم له", "order": 9},
    {"id": "r_c3_s4_010", "subcategory_id": "c3_s4", "name": "توثيق لشكر ولي أمر بعد حل مشكلة كان يعاني منها مع ابنه", "order": 10},

    # ======================================================
    # c3_s5: تشجيع أولياء الأمور بالمشاركة
    # ======================================================
    {"id": "r_c3_s5_001", "subcategory_id": "c3_s5", "name": "تقرير عن دعوة ولي أمر مهندس للتحدث مع الطلاب عن مهنته (للتوجيه المهني)", "order": 1},
    {"id": "r_c3_s5_002", "subcategory_id": "c3_s5", "name": "توثيق لمشاركة ولي أمر في تحكيم مسابقة مدرسية", "order": 2},
    {"id": "r_c3_s5_003", "subcategory_id": "c3_s5", "name": "تقرير عن تشجيع ولي الأمر على حضور حصة مع ابنه في الصف (أسبوع القراءة)", "order": 3},
    {"id": "r_c3_s5_004", "subcategory_id": "c3_s5", "name": "توثيق لمشاركة ولي أمر في تنظيم رحلة مدرسية", "order": 4},
    {"id": "r_c3_s5_005", "subcategory_id": "c3_s5", "name": "تقرير عن دعوة أولياء الأمور للمشاركة في تزيين الفصل بالمناسبات", "order": 5},
    {"id": "r_c3_s5_006", "subcategory_id": "c3_s5", "name": "توثيق لمشاركة أولياء الأمور في فعالية اليوم المفتوح بالمدرسة", "order": 6},
    {"id": "r_c3_s5_007", "subcategory_id": "c3_s5", "name": "تقرير عن تشجيع أولياء الأمور على التطوع في الإشراف على مكتبة المدرسة", "order": 7},
    {"id": "r_c3_s5_008", "subcategory_id": "c3_s5", "name": "توثيق لمساهمة ولي أمر في توفير مواد خام لأنشطة فنية", "order": 8},
    {"id": "r_c3_s5_009", "subcategory_id": "c3_s5", "name": "تقرير عن مشاركة ولي أمر في لجنة تحكيم مشاريع الطلاب النهائية", "order": 9},
    {"id": "r_c3_s5_010", "subcategory_id": "c3_s5", "name": "توثيق لاستضافة أحد أولياء الأمور لتقديم ورشة عن الإسعافات الأولية", "order": 10},

    # ======================================================
    # c4_s1: استخدام التعلم النشط
    # ======================================================
    {"id": "r_c4_s1_001", "subcategory_id": "c4_s1", "name": "تقرير عن تطبيق استراتيجية التعلم التعاوني في الحصة الدراسية", "order": 1},
    {"id": "r_c4_s1_002", "subcategory_id": "c4_s1", "name": "توثيق لتنفيذ استراتيجية العصف الذهني لطرح أفكار حول موضوع الدرس", "order": 2},
    {"id": "r_c4_s1_003", "subcategory_id": "c4_s1", "name": "تقرير عن استخدام استراتيجية المناقشة الجماعية في الدرس", "order": 3},
    {"id": "r_c4_s1_004", "subcategory_id": "c4_s1", "name": "توثيق لعروض تقديمية قدمها الطلاب عن مشاريعهم البحثية", "order": 4},
    {"id": "r_c4_s1_005", "subcategory_id": "c4_s1", "name": "تقرير عن تطبيق استراتيجية لعب الأدوار في الحصة الدراسية", "order": 5},
    {"id": "r_c4_s1_006", "subcategory_id": "c4_s1", "name": "توثيق لاستخدام استراتيجية الكرسي الساخن مع طالب يجيب على أسئلة زملائه", "order": 6},
    {"id": "r_c4_s1_007", "subcategory_id": "c4_s1", "name": "تقرير عن تنفيذ استراتيجية مثلث الاستماع في حصة القراءة", "order": 7},
    {"id": "r_c4_s1_008", "subcategory_id": "c4_s1", "name": "توثيق لاستخدام استراتيجية فكر-زاوج-شارك في حل التمارين", "order": 8},
    {"id": "r_c4_s1_009", "subcategory_id": "c4_s1", "name": "تقرير عن تطبيق استراتيجية المناظرة بين مجموعتين من الطلاب", "order": 9},
    {"id": "r_c4_s1_010", "subcategory_id": "c4_s1", "name": "توثيق لاستخدام استراتيجية التعلم باللعب في الحصة الدراسية", "order": 10},

    # ======================================================
    # c4_s2: التعلم القائم على المشاريع
    # ======================================================
    {"id": "r_c4_s2_001", "subcategory_id": "c4_s2", "name": "تقرير عن مشروع مجسم تعليمي من تنفيذ الطلاب", "order": 1},
    {"id": "r_c4_s2_002", "subcategory_id": "c4_s2", "name": "توثيق لمشروع بحثي عن موضوع دراسي من قبل الطلاب", "order": 2},
    {"id": "r_c4_s2_003", "subcategory_id": "c4_s2", "name": "تقرير عن مشروع صحيفة حائطية عن مناسبة وطنية أو عالمية", "order": 3},
    {"id": "r_c4_s2_004", "subcategory_id": "c4_s2", "name": "توثيق لمشروع ابتكار نموذج عملي لتطبيق المفاهيم", "order": 4},
    {"id": "r_c4_s2_005", "subcategory_id": "c4_s2", "name": "تقرير عن مشروع معرض تعليمي بالتعاون مع معلم التربية الفنية", "order": 5},
    {"id": "r_c4_s2_006", "subcategory_id": "c4_s2", "name": "توثيق لمشروع إعداد وجبة صحية في حصة التربية الأسرية", "order": 6},
    {"id": "r_c4_s2_007", "subcategory_id": "c4_s2", "name": "تقرير عن مشروع تصميم لعبة تعليمية لطلاب الحاسب الآلي", "order": 7},
    {"id": "r_c4_s2_008", "subcategory_id": "c4_s2", "name": "توثيق لمشروع الرحلات المعرفية عبر الإنترنت", "order": 8},
    {"id": "r_c4_s2_009", "subcategory_id": "c4_s2", "name": "تقرير عن مشروع إعادة التدوير للحفاظ على البيئة المدرسية", "order": 9},
    {"id": "r_c4_s2_010", "subcategory_id": "c4_s2", "name": "توثيق لمشروع الاختراع الصغير لتطبيق المفاهيم العلمية", "order": 10},

    # ======================================================
    # c4_s3: استراتيجيات تنمية التفكير
    # ======================================================
    {"id": "r_c4_s3_001", "subcategory_id": "c4_s3", "name": "تقرير عن تطبيق استراتيجية حل المشكلات في الحصة الدراسية", "order": 1},
    {"id": "r_c4_s3_002", "subcategory_id": "c4_s3", "name": "توثيق لاستخدام استراتيجية القبعات الست في مناقشة قضية مع الطلاب", "order": 2},
    {"id": "r_c4_s3_003", "subcategory_id": "c4_s3", "name": "تقرير عن تطبيق استراتيجية التفكير الناقد بتحليل النصوص", "order": 3},
    {"id": "r_c4_s3_004", "subcategory_id": "c4_s3", "name": "توثيق لاستخدام استراتيجية العصف الذهني لتوليد أفكار إبداعية للطلاب", "order": 4},
    {"id": "r_c4_s3_005", "subcategory_id": "c4_s3", "name": "تقرير عن تطبيق استراتيجية الخرائط الذهنية في تلخيص الدروس", "order": 5},
    {"id": "r_c4_s3_006", "subcategory_id": "c4_s3", "name": "توثيق لاستخدام استراتيجية الأسئلة السابرة (لماذا؟ كيف؟ ماذا لو؟) لتوسيع التفكير", "order": 6},
    {"id": "r_c4_s3_007", "subcategory_id": "c4_s3", "name": "تقرير عن تطبيق استراتيجية التفكير الإبداعي في حصة التعبير الكتابي", "order": 7},
    {"id": "r_c4_s3_008", "subcategory_id": "c4_s3", "name": "توثيق لاستخدام استراتيجية القصة المشوقة لحل مشكلة خيالية", "order": 8},
    {"id": "r_c4_s3_009", "subcategory_id": "c4_s3", "name": "تقرير عن تطبيق استراتيجية التعلم بالاكتشاف", "order": 9},
    {"id": "r_c4_s3_010", "subcategory_id": "c4_s3", "name": "توثيق لاستخدام استراتيجية المقارنة والتبويب في تصنيف المفاهيم", "order": 10},

    # ======================================================
    # c4_s4: استخدام الوسائل البصرية والسمعية
    # ======================================================
    {"id": "r_c4_s4_001", "subcategory_id": "c4_s4", "name": "تقرير عن استخدام عروض البوربوينت المصورة في شرح الدرس", "order": 1},
    {"id": "r_c4_s4_002", "subcategory_id": "c4_s4", "name": "توثيق لعرض فيديو تعليمي في الحصة الدراسية", "order": 2},
    {"id": "r_c4_s4_003", "subcategory_id": "c4_s4", "name": "تقرير عن استخدام البطاقات المصورة لتعليم المفردات", "order": 3},
    {"id": "r_c4_s4_004", "subcategory_id": "c4_s4", "name": "توثيق لاستخدام الخرائط الصماء في الحصة الدراسية", "order": 4},
    {"id": "r_c4_s4_005", "subcategory_id": "c4_s4", "name": "تقرير عن تشغيل مقاطع صوتية (للقرآن، الأناشيد) في الحصة", "order": 5},
    {"id": "r_c4_s4_006", "subcategory_id": "c4_s4", "name": "توثيق لاستخدام الرسوم البيانية في توضيح نتائج استبيان", "order": 6},
    {"id": "r_c4_s4_007", "subcategory_id": "c4_s4", "name": "تقرير عن استخدام السبورة الذكية لعرض صور تفاعلية", "order": 7},
    {"id": "r_c4_s4_008", "subcategory_id": "c4_s4", "name": "توثيق لاستخدام الإنفوجرافيك في تلخيص المعلومات", "order": 8},
    {"id": "r_c4_s4_009", "subcategory_id": "c4_s4", "name": "تقرير عن استخدام المجسمات التعليمية في الشرح", "order": 9},
    {"id": "r_c4_s4_010", "subcategory_id": "c4_s4", "name": "توثيق لعرض فيلم قصير في الحصة الدراسية", "order": 10},

    # ======================================================
    # c4_s5: التعليم المتمايز
    # ======================================================
    {"id": "r_c4_s5_001", "subcategory_id": "c4_s5", "name": "تقرير عن تخصيص أنشطة بصرية (رسوم، خرائط) للطلاب ذوي النمط البصري", "order": 1},
    {"id": "r_c4_s5_002", "subcategory_id": "c4_s5", "name": "توثيق لتوفير أنشطة سمعية (تسجيلات، مناقشات) للطلاب ذوي النمط السمعي", "order": 2},
    {"id": "r_c4_s5_003", "subcategory_id": "c4_s5", "name": "تقرير عن تصميم أنشطة حركية (تجارب، نماذج) للطلاب ذوي النمط الحركي", "order": 3},
    {"id": "r_c4_s5_004", "subcategory_id": "c4_s5", "name": "توثيق لتقديم خيارات متعددة للواجب (كتابة تقرير، رسم مجسم، إعداد عرض)", "order": 4},
    {"id": "r_c4_s5_005", "subcategory_id": "c4_s5", "name": "تقرير عن تقسيم الطلاب لمجموعات حسب مستوياتهم وتقديم مهام مناسبة", "order": 5},
    {"id": "r_c4_s5_006", "subcategory_id": "c4_s5", "name": "توثيق لإعطاء وقت إضافي للطلاب بطيئي التعلم لإنجاز المهام", "order": 6},
    {"id": "r_c4_s5_007", "subcategory_id": "c4_s5", "name": "تقرير عن توفير أنشطة إثرائية للطلاب المتفوقين والمتقدمين", "order": 7},
    {"id": "r_c4_s5_008", "subcategory_id": "c4_s5", "name": "توثيق لاستخدام نصوص متنوعة المستوى في حصة القراءة", "order": 8},
    {"id": "r_c4_s5_009", "subcategory_id": "c4_s5", "name": "تقرير عن تنويع أسئلة التقويم لتناسب الجميع", "order": 9},
    {"id": "r_c4_s5_010", "subcategory_id": "c4_s5", "name": "توثيق لتقديم الدعم الفردي للطلاب ذوي صعوبات التعلم أثناء الحصة", "order": 10},

    # ======================================================
    # c4_s6: استراتيجيات التعلم الحديثة
    # ======================================================
    {"id": "r_c4_s6_001", "subcategory_id": "c4_s6", "name": "تقرير عن تطبيق استراتيجية الصف المقلوب بتكليف الطلاب بمشاهدة فيديو قبل الحصة", "order": 1},
    {"id": "r_c4_s6_002", "subcategory_id": "c4_s6", "name": "توثيق لاستخدام استراتيجية التعلم بالألعاب الإلكترونية عبر منصة تعليمية", "order": 2},
    {"id": "r_c4_s6_003", "subcategory_id": "c4_s6", "name": "تقرير عن تطبيق استراتيجية الرحلات المعرفية عبر الإنترنت (WebQuest)", "order": 3},
    {"id": "r_c4_s6_004", "subcategory_id": "c4_s6", "name": "توثيق لاستخدام استراتيجية التعلم بالترفيه من خلال ألعاب تعليمية ورقية", "order": 4},
    {"id": "r_c4_s6_005", "subcategory_id": "c4_s6", "name": "تقرير عن تطبيق استراتيجية مسرح الدمى مع طلاب الصفوف الأولية", "order": 5},
    {"id": "r_c4_s6_006", "subcategory_id": "c4_s6", "name": "توثيق لاستخدام استراتيجية المعارض العلمية لعرض مشاريع الطلاب", "order": 6},
    {"id": "r_c4_s6_007", "subcategory_id": "c4_s6", "name": "تقرير عن تطبيق استراتيجية التعلم بالمشاريع التعاونية عبر منصات إلكترونية", "order": 7},
    {"id": "r_c4_s6_008", "subcategory_id": "c4_s6", "name": "توثيق لاستخدام استراتيجية القصة الرقمية في سرد الأحداث", "order": 8},
    {"id": "r_c4_s6_009", "subcategory_id": "c4_s6", "name": "تقرير عن تطبيق استراتيجية التعلم التبادلي في تدريس النصوص", "order": 9},
    {"id": "r_c4_s6_010", "subcategory_id": "c4_s6", "name": "توثيق لاستخدام استراتيجية الألعاب اللغوية", "order": 10},

    # ======================================================
    # c4_s7: التعلم التعاوني
    # ======================================================
    {"id": "r_c4_s7_001", "subcategory_id": "c4_s7", "name": "تقرير عن تطبيق استراتيجية التعلم التعاوني (جيجسو) في الحصة الدراسية", "order": 1},
    {"id": "r_c4_s7_002", "subcategory_id": "c4_s7", "name": "توثيق لتوزيع الطلاب على مجموعات عمل متعاونة في الحصة", "order": 2},
    {"id": "r_c4_s7_003", "subcategory_id": "c4_s7", "name": "تقرير عن تطبيق استراتيجية مجموعات الخبراء في حل المسائل المعقدة", "order": 3},
    {"id": "r_c4_s7_004", "subcategory_id": "c4_s7", "name": "توثيق لاستخدام استراتيجية التعلم التعاوني في مشروع بحثي جماعي", "order": 4},
    {"id": "r_c4_s7_005", "subcategory_id": "c4_s7", "name": "تقرير عن تنفيذ استراتيجية الرؤوس المرقمة في حصة المراجعة", "order": 5},
    {"id": "r_c4_s7_006", "subcategory_id": "c4_s7", "name": "توثيق لتطبيق استراتيجية مسابقة الفرق في نهاية الوحدة", "order": 6},
    {"id": "r_c4_s7_007", "subcategory_id": "c4_s7", "name": "تقرير عن استخدام استراتيجية المجموعات المتداخلة في مناقشة موضوع معقد", "order": 7},
    {"id": "r_c4_s7_008", "subcategory_id": "c4_s7", "name": "توثيق لتقييم أداء المجموعات في مشروع تعاوني", "order": 8},
    {"id": "r_c4_s7_009", "subcategory_id": "c4_s7", "name": "تقرير عن تطبيق استراتيجية دوائر التعلم", "order": 9},
    {"id": "r_c4_s7_010", "subcategory_id": "c4_s7", "name": "توثيق لاستخدام استراتيجية التحقق من الزميل في تصحيح الواجبات", "order": 10},

    # ======================================================
    # c5_s1: تحديد أهداف ومعايير واضحة
    # ======================================================
    {"id": "r_c5_s1_001", "subcategory_id": "c5_s1", "name": "تقرير عن كتابة أهداف الدرس على السبورة في بداية كل حصة", "order": 1},
    {"id": "r_c5_s1_002", "subcategory_id": "c5_s1", "name": "توثيق لصياغة معايير النجاح بطريقة مبسطة للطلاب", "order": 2},
    {"id": "r_c5_s1_003", "subcategory_id": "c5_s1", "name": "تقرير عن مناقشة الأهداف مع الطلاب قبل البدء بالشرح", "order": 3},
    {"id": "r_c5_s1_004", "subcategory_id": "c5_s1", "name": "توثيق لتوزيع ورقة عمل توضح المطلوب من الطالب تحقيقه في المشروع", "order": 4},
    {"id": "r_c5_s1_005", "subcategory_id": "c5_s1", "name": "تقرير عن توضيح معايير التصحيح للطلاب قبل أداء الاختبار", "order": 5},
    {"id": "r_c5_s1_006", "subcategory_id": "c5_s1", "name": "توثيق لكتابة أهداف أسبوعية على لوحة الإعلانات بالفصل", "order": 6},
    {"id": "r_c5_s1_007", "subcategory_id": "c5_s1", "name": "تقرير عن شرح نموذج إجابة متوقع للطلاب في المرحلة الثانوية", "order": 7},
    {"id": "r_c5_s1_008", "subcategory_id": "c5_s1", "name": "توثيق لاستخدام قوائم الرصد الذاتي للطلاب لمتابعة تقدمهم", "order": 8},
    {"id": "r_c5_s1_009", "subcategory_id": "c5_s1", "name": "تقرير عن توجيه الطلاب لكتابة أهدافهم الشخصية للفصل الدراسي", "order": 9},
    {"id": "r_c5_s1_010", "subcategory_id": "c5_s1", "name": "توثيق لمراجعة الأهداف مع الطلاب في نهاية الحصة للتأكد من تحقيقها", "order": 10},

    # ======================================================
    # c5_s2: تقديم إفادة سريعة ومحددة
    # ======================================================
    {"id": "r_c5_s2_001", "subcategory_id": "c5_s2", "name": "تقرير عن تصحيح أوراق العمل أثناء الحصة وتقديم ملاحظات فورية للطلاب", "order": 1},
    {"id": "r_c5_s2_002", "subcategory_id": "c5_s2", "name": "توثيق لتعليقاتي على إجابات الطلاب الشفوية", "order": 2},
    {"id": "r_c5_s2_003", "subcategory_id": "c5_s2", "name": "تقرير عن تقديم تغذية راجعة مكتوبة على دفاتر الواجبات", "order": 3},
    {"id": "r_c5_s2_004", "subcategory_id": "c5_s2", "name": "توثيق لمراجعة الإملاء مع الطلاب مباشرة بعد كتابته", "order": 4},
    {"id": "r_c5_s2_005", "subcategory_id": "c5_s2", "name": "تقرير عن مناقشة أخطاء الاختبار القصير مع الطلاب في الحصة التالية", "order": 5},
    {"id": "r_c5_s2_006", "subcategory_id": "c5_s2", "name": "توثيق لتوجيه الطلاب لتصحيح أخطائهم بأنفسهم بعد التوضيح", "order": 6},
    {"id": "r_c5_s2_007", "subcategory_id": "c5_s2", "name": "تقرير عن استخدام عبارات تشجيعية محددة", "order": 7},
    {"id": "r_c5_s2_008", "subcategory_id": "c5_s2", "name": "توثيق لتقديم نموذج إجابة صحيحة ومقارنتها بإجابة الطالب", "order": 8},
    {"id": "r_c5_s2_009", "subcategory_id": "c5_s2", "name": "تقرير عن تخصيص دقائق آخر الحصة لمراجعة الأخطاء الشائعة", "order": 9},
    {"id": "r_c5_s2_010", "subcategory_id": "c5_s2", "name": "توثيق لاستخدام بطاقات ملاحظات لاصقة على دفاتر الطلاب", "order": 10},

    # ======================================================
    # c5_s3: تكييف الإفادة وفق الاحتياجات الفردية
    # ======================================================
    {"id": "r_c5_s3_001", "subcategory_id": "c5_s3", "name": "تقرير عن تقديم تغذية راجعة شفهية فردية لطالب يعاني من ضعف في التحصيل", "order": 1},
    {"id": "r_c5_s3_002", "subcategory_id": "c5_s3", "name": "توثيق لكتابة ملاحظات مبسطة ومصحوبة برسوم لطالب من ذوي صعوبات التعلم", "order": 2},
    {"id": "r_c5_s3_003", "subcategory_id": "c5_s3", "name": "تقرير عن لقاء فردي مع طالب متميز لتوجيهه لموارد إضافية", "order": 3},
    {"id": "r_c5_s3_004", "subcategory_id": "c5_s3", "name": "توثيق لتقديم تغذية راجعة عبر تسجيل صوتي لطالب بالمرحلة الابتدائية", "order": 4},
    {"id": "r_c5_s3_005", "subcategory_id": "c5_s3", "name": "تقرير عن تخصيص وقت للجلوس مع كل مجموعة والعمل على توجيهها", "order": 5},
    {"id": "r_c5_s3_006", "subcategory_id": "c5_s3", "name": "توثيق لاستخدام لغة جسد وتعبيرات وجه مناسبة مع الطلاب الخجولين", "order": 6},
    {"id": "r_c5_s3_007", "subcategory_id": "c5_s3", "name": "تقرير عن إعادة شرح فكرة معينة لطالب لم يستوعبها بطريقة مختلفة", "order": 7},
    {"id": "r_c5_s3_008", "subcategory_id": "c5_s3", "name": "توثيق لتكليف طالب سريع التعلم بمساعدة زميل له", "order": 8},
    {"id": "r_c5_s3_009", "subcategory_id": "c5_s3", "name": "تقرير عن تعديل أسلوب التصحيح لطلاب الابتدائي", "order": 9},
    {"id": "r_c5_s3_010", "subcategory_id": "c5_s3", "name": "توثيق لمراعاة الفروق الفردية في سرعة التعلم أثناء تقديم الملاحظات", "order": 10},

    # ======================================================
    # c5_s4: تعزيز الثقة وتشجيع التطور
    # ======================================================
    {"id": "r_c5_s4_001", "subcategory_id": "c5_s4", "name": "تقرير عن استخدام عبارات تحفيزية", "order": 1},
    {"id": "r_c5_s4_002", "subcategory_id": "c5_s4", "name": "توثيق لإعطاء الطالب فرصة لإعادة الاختبار أو تحسين واجبه", "order": 2},
    {"id": "r_c5_s4_003", "subcategory_id": "c5_s4", "name": "تقرير عن تخصيص ركن نجوم التميز في الفصل لعرض أعمال الطلاب المجيدة", "order": 3},
    {"id": "r_c5_s4_004", "subcategory_id": "c5_s4", "name": "توثيق لإرسال بطاقات شكر وتقدير لأولياء أمور الطلاب المتميزين", "order": 4},
    {"id": "r_c5_s4_005", "subcategory_id": "c5_s4", "name": "تقرير عن الاحتفاء بأي تقدم بسيط للطلاب الضعاف", "order": 5},
    {"id": "r_c5_s4_006", "subcategory_id": "c5_s4", "name": "توثيق لتشجيع الطلاب على مشاركة إنجازاتهم أمام الزملاء", "order": 6},
    {"id": "r_c5_s4_007", "subcategory_id": "c5_s4", "name": "تقرير عن تصحيح الأخطاء بطريقة لا تقلل من ثقة الطالب بنفسه", "order": 7},
    {"id": "r_c5_s4_008", "subcategory_id": "c5_s4", "name": "توثيق لتحويل الأخطاء إلى فرص تعلم", "order": 8},
    {"id": "r_c5_s4_009", "subcategory_id": "c5_s4", "name": "تقرير عن تخصيص دقائق للتحدث عن الإنجازات الأسبوعية", "order": 9},
    {"id": "r_c5_s4_010", "subcategory_id": "c5_s4", "name": "توثيق لإشراك الطلاب في وضع أهداف تحسينية بسيطة لأنفسهم", "order": 10},

    # ======================================================
    # c5_s5: استخدام التكنولوجيا لتقديم الإفادة
    # ======================================================
    {"id": "r_c5_s5_001", "subcategory_id": "c5_s5", "name": "تقرير عن إرسال تغذية راجعة عبر منصة مدرستي على واجبات الطلاب", "order": 1},
    {"id": "r_c5_s5_002", "subcategory_id": "c5_s5", "name": "توثيق لاستخدام البريد الإلكتروني لإرسال تقارير تقدم للطلاب وأولياء أمورهم", "order": 2},
    {"id": "r_c5_s5_003", "subcategory_id": "c5_s5", "name": "تقرير عن استخدام خاصية التعليقات في مستندات جوجل لتصحيح الأبحاث", "order": 3},
    {"id": "r_c5_s5_004", "subcategory_id": "c5_s5", "name": "توثيق لإرسال رسائل نصية قصيرة للطلاب المتفوقين", "order": 4},
    {"id": "r_c5_s5_005", "subcategory_id": "c5_s5", "name": "تقرير عن استخدام الاختبارات الإلكترونية التي تظهر النتيجة والتعليق فوراً", "order": 5},
    {"id": "r_c5_s5_006", "subcategory_id": "c5_s5", "name": "توثيق لإنشاء قناة على اليوتيوب وعرض فيديوهات تصحيح للأخطاء الشائعة", "order": 6},
    {"id": "r_c5_s5_007", "subcategory_id": "c5_s5", "name": "تقرير عن استخدام برامج تحويل النص إلى كلام لطلاب صعوبات القراءة", "order": 7},
    {"id": "r_c5_s5_008", "subcategory_id": "c5_s5", "name": "توثيق لمشاركة نماذج إجابة ممتازة عبر منصة الفصل", "order": 8},
    {"id": "r_c5_s5_009", "subcategory_id": "c5_s5", "name": "تقرير عن استخدام استبيانات إلكترونية لجمع آراء الطلاب حول أدائهم", "order": 9},
    {"id": "r_c5_s5_010", "subcategory_id": "c5_s5", "name": "توثيق لإرسال شارات رقمية للطلاب عند تحقيق إنجاز", "order": 10},

    # ======================================================
    # c6_s1: وضع أهداف تعليمية واضحة وقابلة للقياس
    # ======================================================
    {"id": "r_c6_s1_001", "subcategory_id": "c6_s1", "name": "نموذج من خطة تحضير يومية تحتوي على أهداف سلوكية قابلة للقياس", "order": 1},
    {"id": "r_c6_s1_002", "subcategory_id": "c6_s1", "name": "تقرير عن صياغة أهداف درس باستخدام أفعال قياسية", "order": 2},
    {"id": "r_c6_s1_003", "subcategory_id": "c6_s1", "name": "توثيق لمطابقة الأهداف الموضوعة مع نواتج التعلم في المنهج", "order": 3},
    {"id": "r_c6_s1_004", "subcategory_id": "c6_s1", "name": "تقرير عن مشاركة الأهداف مع الطلاب والتأكد من فهمهم لها", "order": 4},
    {"id": "r_c6_s1_005", "subcategory_id": "c6_s1", "name": "توثيق لكتابة أهداف أسبوعية للخطة الدراسية", "order": 5},
    {"id": "r_c6_s1_006", "subcategory_id": "c6_s1", "name": "تقرير عن مراجعة الأهداف بعد تنفيذ الدرس للتأكد من تحقيقها", "order": 6},
    {"id": "r_c6_s1_007", "subcategory_id": "c6_s1", "name": "توثيق لتعديل أهداف درس بناءً على مستوى الطلاب الفعلي", "order": 7},
    {"id": "r_c6_s1_008", "subcategory_id": "c6_s1", "name": "تقرير عن تصميم أنشطة تقويمية تقيس الأهداف الموضوعة", "order": 8},
    {"id": "r_c6_s1_009", "subcategory_id": "c6_s1", "name": "توثيق لصياغة أهداف للطلاب الموهوبين في الخطة الإثرائية", "order": 9},
    {"id": "r_c6_s1_010", "subcategory_id": "c6_s1", "name": "تقرير عن وضع أهداف علاجية للطلاب المتعثرين في خطة الدعم", "order": 10},

    # ======================================================
    # c6_s2: تصميم خطة دراسية تتوافق مع المنهج واحتياجات الطلاب
    # ======================================================
    {"id": "r_c6_s2_001", "subcategory_id": "c6_s2", "name": "نموذج من خطة توزيع المنهج على أسابيع الفصل الدراسي", "order": 1},
    {"id": "r_c6_s2_002", "subcategory_id": "c6_s2", "name": "تقرير عن تصميم خطة درس تراعي وجود طلاب من ذوي صعوبات التعلم بالفصل", "order": 2},
    {"id": "r_c6_s2_003", "subcategory_id": "c6_s2", "name": "توثيق لإعداد خطة نشاط لا صفي يتوافق مع المنهج", "order": 3},
    {"id": "r_c6_s2_004", "subcategory_id": "c6_s2", "name": "تقرير عن تخصيص حصص للمراجعة في الخطة قبل الاختبارات", "order": 4},
    {"id": "r_c6_s2_005", "subcategory_id": "c6_s2", "name": "توثيق لتصميم خطة للأنشطة الإثرائية للطلاب المتفوقين", "order": 5},
    {"id": "r_c6_s2_006", "subcategory_id": "c6_s2", "name": "تقرير عن إعداد خطة علاجية للطلاب الضعاف في المهارات الأساسية", "order": 6},
    {"id": "r_c6_s2_007", "subcategory_id": "c6_s2", "name": "توثيق لمراعاة أيام المناسبات والإجازات في خطة التوزيع", "order": 7},
    {"id": "r_c6_s2_008", "subcategory_id": "c6_s2", "name": "تقرير عن تصميم خطة درس باستخدام استراتيجية التعلم النشط", "order": 8},
    {"id": "r_c6_s2_009", "subcategory_id": "c6_s2", "name": "توثيق لتكامل الخطة مع معلم المواد الأخرى", "order": 9},
    {"id": "r_c6_s2_010", "subcategory_id": "c6_s2", "name": "تقرير عن إعداد خطة بديلة في حال تعطل الوسائل التقنية", "order": 10},

    # ======================================================
    # c6_s3: مراجعة الخطط بشكل دوري وتعديلها بناءً على نتائج الطلاب
    # ======================================================
    {"id": "r_c6_s3_001", "subcategory_id": "c6_s3", "name": "تقرير عن تعديل خطة الأسبوع القادم بناءً على نتائج اختبار الأسبوع الحالي", "order": 1},
    {"id": "r_c6_s3_002", "subcategory_id": "c6_s3", "name": "توثيق لمراجعة خطة الدرس بعد شعوري بأن الوقت لم يكفِ لتحقيق الأهداف", "order": 2},
    {"id": "r_c6_s3_003", "subcategory_id": "c6_s3", "name": "تقرير عن إعادة توزيع المنهج بعد تأخير بسبب ظروف مدرسية", "order": 3},
    {"id": "r_c6_s3_004", "subcategory_id": "c6_s3", "name": "توثيق لإضافة حصص تدريبية على مهارة معينة بعد ضعف الطلاب فيها", "order": 4},
    {"id": "r_c6_s3_005", "subcategory_id": "c6_s3", "name": "تقرير عن تغيير استراتيجية تدريس في الخطة بعد عدم تفاعل الطلاب معها", "order": 5},
    {"id": "r_c6_s3_006", "subcategory_id": "c6_s3", "name": "توثيق لمراجعة الخطة الفصلية مع قائد المدرسة أو المشرف التربوي", "order": 6},
    {"id": "r_c6_s3_007", "subcategory_id": "c6_s3", "name": "تقرير عن تقليص بعض الأنشطة في الخطة بسبب ضيق الوقت", "order": 7},
    {"id": "r_c6_s3_008", "subcategory_id": "c6_s3", "name": "توثيق لتعديل خطة الدروس بناءً على نتائج التقويم القبلي", "order": 8},
    {"id": "r_c6_s3_009", "subcategory_id": "c6_s3", "name": "تقرير عن مراجعة الخطة العلاجية وتعديلها بعد تحسن مستوى الطالب", "order": 9},
    {"id": "r_c6_s3_010", "subcategory_id": "c6_s3", "name": "توثيق لتدوين الملاحظات على الخطة الأصلية لتحسينها في العام القادم", "order": 10},

    # ======================================================
    # c6_s4: مشاركة الخطط مع الزملاء للحصول على ملاحظات
    # ======================================================
    {"id": "r_c6_s4_001", "subcategory_id": "c6_s4", "name": "تقرير عن مشاركة خطة درس مع معلم نفس التخصص لمناقشتها", "order": 1},
    {"id": "r_c6_s4_002", "subcategory_id": "c6_s4", "name": "توثيق لجلسة تخطيط تعاوني مع فريق المواد الدراسية", "order": 2},
    {"id": "r_c6_s4_003", "subcategory_id": "c6_s4", "name": "تقرير عن استشارة معلم خبير في تعديل خطة الوحدة الدراسية", "order": 3},
    {"id": "r_c6_s4_004", "subcategory_id": "c6_s4", "name": "توثيق لمراجعة خطة زميل جديد وتقديم ملاحظات له", "order": 4},
    {"id": "r_c6_s4_005", "subcategory_id": "c6_s4", "name": "تقرير عن مناقشة خطة الأنشطة الصفية مع معلم الصفوف الأولية", "order": 5},
    {"id": "r_c6_s4_006", "subcategory_id": "c6_s4", "name": "توثيق للاستفادة من ملاحظات زميل في تحسين خطة الدرس", "order": 6},
    {"id": "r_c6_s4_007", "subcategory_id": "c6_s4", "name": "تقرير عن تبادل خطط التحضير الإسبوعية مع المعلمين في المدرسة", "order": 7},
    {"id": "r_c6_s4_008", "subcategory_id": "c6_s4", "name": "توثيق لمشاركة خطة مشروع مدرسي مع لجنة النشاط", "order": 8},
    {"id": "r_c6_s4_009", "subcategory_id": "c6_s4", "name": "تقرير عن حضور ورشة تخطيط جماعي لتصميم خطة فصلية موحدة", "order": 9},
    {"id": "r_c6_s4_010", "subcategory_id": "c6_s4", "name": "توثيق لمراجعة الخطة العلاجية مع الأخصائي النفسي أو المرشد الطلابي", "order": 10},

    # ======================================================
    # c6_s5: تفهم الخصائص النفسية للمرحلة العمرية
    # ======================================================
    {"id": "r_c6_s5_001", "subcategory_id": "c6_s5", "name": "تقرير عن تصميم أنشطة حركية قصيرة تناسب طلاب المرحلة الابتدائية", "order": 1},
    {"id": "r_c6_s5_002", "subcategory_id": "c6_s5", "name": "توثيق لاستخدام أسلوب الحوار والمناقشة مع طلاب المرحلة المتوسطة", "order": 2},
    {"id": "r_c6_s5_003", "subcategory_id": "c6_s5", "name": "تقرير عن إعطاء مسؤوليات وقيادة للطلاب في المرحلة الثانوية", "order": 3},
    {"id": "r_c6_s5_004", "subcategory_id": "c6_s5", "name": "توثيق لمراعاة فترات الانتباه القصيرة لطلاب الصفوف الأولية", "order": 4},
    {"id": "r_c6_s5_005", "subcategory_id": "c6_s5", "name": "تقرير عن التعامل مع حاجة طلاب المرحلة المتوسطة للانتماء للجماعة", "order": 5},
    {"id": "r_c6_s5_006", "subcategory_id": "c6_s5", "name": "توثيق لاستخدام القدوة والتوجيه المباشر مع طلاب المرحلة الابتدائية", "order": 6},
    {"id": "r_c6_s5_007", "subcategory_id": "c6_s5", "name": "تقرير عن احترام استقلالية طلاب المرحلة الثانوية وإشراكهم في اتخاذ القرارات", "order": 7},
    {"id": "r_c6_s5_008", "subcategory_id": "c6_s5", "name": "توثيق لاستخدام التعزيز المادي والمعنوي مع طلاب المرحلة الابتدائية", "order": 8},
    {"id": "r_c6_s5_009", "subcategory_id": "c6_s5", "name": "تقرير عن تفهم التغيرات النفسية والجسدية لطلاب المرحلة المتوسطة", "order": 9},
    {"id": "r_c6_s5_010", "subcategory_id": "c6_s5", "name": "توثيق لتوجيه طلاب الثانوي للتخطيط لمستقبلهم المهني والأكاديمي", "order": 10},

    # ======================================================
    # c7_s1: استخدام السبورات الذكية والأجهزة اللوحية
    # ======================================================
    {"id": "r_c7_s1_001", "subcategory_id": "c7_s1", "name": "تقرير عن استخدام السبورة التفاعلية في شرح الدروس", "order": 1},
    {"id": "r_c7_s1_002", "subcategory_id": "c7_s1", "name": "توثيق لتوظيف الأجهزة اللوحية في البحث عن معلومات أثناء الحصة", "order": 2},
    {"id": "r_c7_s1_003", "subcategory_id": "c7_s1", "name": "تقرير عن استخدام تطبيق تعليمي على التابلت لشرح المفاهيم", "order": 3},
    {"id": "r_c7_s1_004", "subcategory_id": "c7_s1", "name": "توثيق لعرض فيديو تعليمي عبر السبورة الذكية", "order": 4},
    {"id": "r_c7_s1_005", "subcategory_id": "c7_s1", "name": "تقرير عن استخدام القلم الضوئي على السبورة الذكية للكتابة والرسم", "order": 5},
    {"id": "r_c7_s1_006", "subcategory_id": "c7_s1", "name": "توثيق لتوظيف الأجهزة اللوحية في قراءة النصوص الرقمية", "order": 6},
    {"id": "r_c7_s1_007", "subcategory_id": "c7_s1", "name": "تقرير عن استخدام برنامج الرسم على التابلت في الحصة", "order": 7},
    {"id": "r_c7_s1_008", "subcategory_id": "c7_s1", "name": "توثيق لعرض خرائط ذهنية تفاعلية عبر السبورة الذكية", "order": 8},
    {"id": "r_c7_s1_009", "subcategory_id": "c7_s1", "name": "تقرير عن استخدام تطبيقات التصويت الفوري عبر الأجهزة اللوحية", "order": 9},
    {"id": "r_c7_s1_010", "subcategory_id": "c7_s1", "name": "توثيق لتشغيل المحاكاة الافتراضية عبر السبورة الذكية", "order": 10},

    # ======================================================
    # c7_s2: تطبيق برامج التعلم الالكتروني
    # ======================================================
    {"id": "r_c7_s2_001", "subcategory_id": "c7_s2", "name": "تقرير عن استخدام منصة مدرستي في رفع الدروس والمصادر للطلاب", "order": 1},
    {"id": "r_c7_s2_002", "subcategory_id": "c7_s2", "name": "توثيق لإنشاء فصل افتراضي عبر منصة مايكروسوفت تيمز لحصة مراجعة", "order": 2},
    {"id": "r_c7_s2_003", "subcategory_id": "c7_s2", "name": "تقرير عن استخدام نظام نور لرصد الدرجات ومتابعة الغياب", "order": 3},
    {"id": "r_c7_s2_004", "subcategory_id": "c7_s2", "name": "توثيق لتصميم اختبار إلكتروني عبر منصة مدرستي وتصحيحه آلياً", "order": 4},
    {"id": "r_c7_s2_005", "subcategory_id": "c7_s2", "name": "تقرير عن تفعيل الواجبات الإلكترونية للطلاب عبر المنصة", "order": 5},
    {"id": "r_c7_s2_006", "subcategory_id": "c7_s2", "name": "توثيق للتواصل مع الطلاب وأولياء الأمور عبر منصة المدرسة", "order": 6},
    {"id": "r_c7_s2_007", "subcategory_id": "c7_s2", "name": "تقرير عن استخدام بنك الأسئلة في المنصة لتصميم اختبارات متنوعة", "order": 7},
    {"id": "r_c7_s2_008", "subcategory_id": "c7_s2", "name": "توثيق لمشاركة فيديوهات تعليمية مسجلة عبر قناة المدرسة على اليوتيوب", "order": 8},
    {"id": "r_c7_s2_009", "subcategory_id": "c7_s2", "name": "تقرير عن استخدام منصات تعليمية عالمية كمصادر إثرائية", "order": 9},
    {"id": "r_c7_s2_010", "subcategory_id": "c7_s2", "name": "توثيق لحضور اجتماعات مجلس المعلمين عبر منصة افتراضية", "order": 10},

    # ======================================================
    # c7_s3: تشجيع الطلاب على استخدام التطبيقات التعليمية
    # ======================================================
    {"id": "r_c7_s3_001", "subcategory_id": "c7_s3", "name": "تقرير عن توجيه الطلاب لاستخدام تطبيقات تعليمية للمراجعة", "order": 1},
    {"id": "r_c7_s3_002", "subcategory_id": "c7_s3", "name": "توثيق لتكليف الطلاب باستخدام تطبيقات لحفظ المفردات والمصطلحات", "order": 2},
    {"id": "r_c7_s3_003", "subcategory_id": "c7_s3", "name": "تقرير عن تشجيع الطلاب على استخدام المنصات التعليمية", "order": 3},
    {"id": "r_c7_s3_004", "subcategory_id": "c7_s3", "name": "توثيق لتطبيق حل المسائل والتحقق من الحلول", "order": 4},
    {"id": "r_c7_s3_005", "subcategory_id": "c7_s3", "name": "تقرير عن استخدام تطبيقات تعلم اللغات", "order": 5},
    {"id": "r_c7_s3_006", "subcategory_id": "c7_s3", "name": "توثيق لتكليف الطلاب بإنشاء عروض تقديمية باستخدام برامج متخصصة", "order": 6},
    {"id": "r_c7_s3_007", "subcategory_id": "c7_s3", "name": "تقرير عن استخدام تطبيقات الخرائط والمواقع الجغرافية", "order": 7},
    {"id": "r_c7_s3_008", "subcategory_id": "c7_s3", "name": "توثيق لتشجيع الطلاب على استخدام تطبيقات القراءة الرقمية", "order": 8},
    {"id": "r_c7_s3_009", "subcategory_id": "c7_s3", "name": "تقرير عن استخدام منصات التفاعل والمشاركة في العصف الذهني", "order": 9},
    {"id": "r_c7_s3_010", "subcategory_id": "c7_s3", "name": "توثيق لتكليف الطلاب بتصميم مقاطع فيديو قصيرة", "order": 10},

    # ======================================================
    # c7_s4: تنظيم ورش العمل حول استخدام التكنولوجيا
    # ======================================================
    {"id": "r_c7_s4_001", "subcategory_id": "c7_s4", "name": "تقرير عن تقديم ورشة للزملاء عن أساسيات استخدام السبورة الذكية", "order": 1},
    {"id": "r_c7_s4_002", "subcategory_id": "c7_s4", "name": "توثيق لتنظيم دورة تدريبية للطلاب عن الاستخدام الآمن للإنترنت", "order": 2},
    {"id": "r_c7_s4_003", "subcategory_id": "c7_s4", "name": "تقرير عن مشاركتي في تنظيم ورشة عن تصميم الاختبارات الإلكترونية", "order": 3},
    {"id": "r_c7_s4_004", "subcategory_id": "c7_s4", "name": "توثيق لحضور ورشة عن تطبيقات الذكاء الاصطناعي في التعليم", "order": 4},
    {"id": "r_c7_s4_005", "subcategory_id": "c7_s4", "name": "تقرير عن تنظيم ورشة توعوية لأولياء الأمور عن منصة مدرستي", "order": 5},
    {"id": "r_c7_s4_006", "subcategory_id": "c7_s4", "name": "توثيق لورشة عن استخدام برامج العروض التقديمية التفاعلية للطلاب", "order": 6},
    {"id": "r_c7_s4_007", "subcategory_id": "c7_s4", "name": "تقرير عن تنظيم معرض داخلي للتطبيقات التعليمية المفيدة", "order": 7},
    {"id": "r_c7_s4_008", "subcategory_id": "c7_s4", "name": "توثيق لورشة عن صناعة المحتوى الرقمي لطلاب الثانوي", "order": 8},
    {"id": "r_c7_s4_009", "subcategory_id": "c7_s4", "name": "تقرير عن تقديم حصة تطبيقية للزملاء عن استخدام الأجهزة اللوحية", "order": 9},
    {"id": "r_c7_s4_010", "subcategory_id": "c7_s4", "name": "توثيق للمشاركة في تنظيم يوم تقني مفتوح بالمدرسة", "order": 10},

    # ======================================================
    # c8_s1: تزيين الفصل بوسائل تعليمية جذابة
    # ======================================================
    {"id": "r_c8_s1_001", "subcategory_id": "c8_s1", "name": "تقرير عن إعداد لوحة إعلانات فصلية عن إنجازات الطلاب", "order": 1},
    {"id": "r_c8_s1_002", "subcategory_id": "c8_s1", "name": "توثيق لتعليق لوحات حائطية بالمعلومات الأساسية للمادة", "order": 2},
    {"id": "r_c8_s1_003", "subcategory_id": "c8_s1", "name": "تقرير عن تزيين الفصل بأعمال الطلاب الفنية والإبداعية", "order": 3},
    {"id": "r_c8_s1_004", "subcategory_id": "c8_s1", "name": "توثيق لوضع بطاقات تعريفية بالأركان التعليمية", "order": 4},
    {"id": "r_c8_s1_005", "subcategory_id": "c8_s1", "name": "تقرير عن تغيير ديكور الفصل وتزيينه بالمناسبات", "order": 5},
    {"id": "r_c8_s1_006", "subcategory_id": "c8_s1", "name": "توثيق لتعليق لوحات بالجداريات العلمية", "order": 6},
    {"id": "r_c8_s1_007", "subcategory_id": "c8_s1", "name": "تقرير عن استخدام الملصقات المحفزة والملونة على جدران الفصل", "order": 7},
    {"id": "r_c8_s1_008", "subcategory_id": "c8_s1", "name": "توثيق لوضع ساعة تعليمية وركن للتاريخ الهجري والميلادي", "order": 8},
    {"id": "r_c8_s1_009", "subcategory_id": "c8_s1", "name": "تقرير عن تخصيص ركن لعرض مجسمات الطلاب", "order": 9},
    {"id": "r_c8_s1_010", "subcategory_id": "c8_s1", "name": "توثيق لتزيين باب الفصل باسم الفصل وشعار مميز", "order": 10},

    # ======================================================
    # c8_s2: تنظيم الفصل بشكل يسهل الحركة والتفاعل
    # ======================================================
    {"id": "r_c8_s2_001", "subcategory_id": "c8_s2", "name": "تقرير عن إعادة ترتيب المقاعد على شكل مجموعات لتسهيل العمل التعاوني", "order": 1},
    {"id": "r_c8_s2_002", "subcategory_id": "c8_s2", "name": "توثيق لتخصيص مساحة فارغة في مقدمة الفصل للأنشطة الحركية", "order": 2},
    {"id": "r_c8_s2_003", "subcategory_id": "c8_s2", "name": "تقرير عن تنظيم المقاعد على شكل حرف U لتسهيل المناقشة", "order": 3},
    {"id": "r_c8_s2_004", "subcategory_id": "c8_s2", "name": "توثيق لتحديد مسار واضح للحركة بين المقاعد", "order": 4},
    {"id": "r_c8_s2_005", "subcategory_id": "c8_s2", "name": "تقرير عن ترتيب أركان التعلم بشكل منظم وسهل الوصول", "order": 5},
    {"id": "r_c8_s2_006", "subcategory_id": "c8_s2", "name": "توثيق لتخصيص ركن للقراءة به مقاعد مريحة وسجادة", "order": 6},
    {"id": "r_c8_s2_007", "subcategory_id": "c8_s2", "name": "تقرير عن وضع مكتب المعلم في مكان يسمح برؤية جميع الطلاب", "order": 7},
    {"id": "r_c8_s2_008", "subcategory_id": "c8_s2", "name": "توثيق لتنظيم أدوات الطلاب بشكل لا يعيق الحركة", "order": 8},
    {"id": "r_c8_s2_009", "subcategory_id": "c8_s2", "name": "تقرير عن تخصيص ركن للأنشطة الفردية والهادئة", "order": 9},
    {"id": "r_c8_s2_010", "subcategory_id": "c8_s2", "name": "توثيق لترتيب الفصل بما يتناسب مع طلاب ذوي الاحتياجات الخاصة", "order": 10},

    # ======================================================
    # c8_s3: توفير الأدوات والموارد التعليمية اللازمة
    # ======================================================
    {"id": "r_c8_s3_001", "subcategory_id": "c8_s3", "name": "تقرير عن تجهيز حقيبة الطوارئ الصفية للطلاب المحتاجين", "order": 1},
    {"id": "r_c8_s3_002", "subcategory_id": "c8_s3", "name": "توثيق لتوفير مجموعة من القواميس والمراجع البسيطة في ركن القراءة", "order": 2},
    {"id": "r_c8_s3_003", "subcategory_id": "c8_s3", "name": "تقرير عن توفير السبورات الشخصية للطلاب للمشاركة", "order": 3},
    {"id": "r_c8_s3_004", "subcategory_id": "c8_s3", "name": "توثيق لتجهيز مواد للتجارب العملية", "order": 4},
    {"id": "r_c8_s3_005", "subcategory_id": "c8_s3", "name": "تقرير عن توفير بطاقات ومجسمات تعليمية للمفاهيم المجردة", "order": 5},
    {"id": "r_c8_s3_006", "subcategory_id": "c8_s3", "name": "توثيق لصيانة الأدوات التعليمية التالفة", "order": 6},
    {"id": "r_c8_s3_007", "subcategory_id": "c8_s3", "name": "تقرير عن توفير كتب وقصص إضافية في مكتبة الفصل", "order": 7},
    {"id": "r_c8_s3_008", "subcategory_id": "c8_s3", "name": "توثيق لتجهيز مواد للأنشطة الفنية", "order": 8},
    {"id": "r_c8_s3_009", "subcategory_id": "c8_s3", "name": "تقرير عن توفير وسائل تقنية عند الحاجة", "order": 9},
    {"id": "r_c8_s3_010", "subcategory_id": "c8_s3", "name": "توثيق للتأكد من توفر أدوات النظافة بشكل دائم", "order": 10},

    # ======================================================
    # c8_s4: توفير بيئة تعليمية آمنة
    # ======================================================
    {"id": "r_c8_s4_001", "subcategory_id": "c8_s4", "name": "تقرير عن الفحص الدوري لمقاعد الطلاب وإبلاغ الإدارة بأي تلف", "order": 1},
    {"id": "r_c8_s4_002", "subcategory_id": "c8_s4", "name": "توثيق للتأكد من سلامة التوصيلات الكهربائية في الفصل", "order": 2},
    {"id": "r_c8_s4_003", "subcategory_id": "c8_s4", "name": "تقرير عن إبعاد أي مواد خطرة عن متناول الطلاب", "order": 3},
    {"id": "r_c8_s4_004", "subcategory_id": "c8_s4", "name": "توثيق لتدريب الطلاب على خطة الإخلاء وطريق الخروج الآمن", "order": 4},
    {"id": "r_c8_s4_005", "subcategory_id": "c8_s4", "name": "تقرير عن التأكد من تهوية الفصل وإنارته بشكل جيد", "order": 5},
    {"id": "r_c8_s4_006", "subcategory_id": "c8_s4", "name": "توثيق لخلق جو من الاحترام المتبادل بين الطلاب", "order": 6},
    {"id": "r_c8_s4_007", "subcategory_id": "c8_s4", "name": "تقرير عن تشجيع الطلاب على التعبير عن آرائهم بحرية دون خوف", "order": 7},
    {"id": "r_c8_s4_008", "subcategory_id": "c8_s4", "name": "توثيق للتعامل مع أي سلوك عدواني فوراً وبحزم لحماية الطلاب", "order": 8},
    {"id": "r_c8_s4_009", "subcategory_id": "c8_s4", "name": "تقرير عن طمأنة الطلاب الجدد والخجولين واحتضانهم", "order": 9},
    {"id": "r_c8_s4_010", "subcategory_id": "c8_s4", "name": "توثيق لمراعاة مشاعر الطلاب وعدم التعنيف اللفظي أو الجسدي", "order": 10},

    # ======================================================
    # c8_s5: تمكين المتعلمين من التعبير عن أنفسهم
    # ======================================================
    {"id": "r_c8_s5_001", "subcategory_id": "c8_s5", "name": "تقرير عن تخصيص وقت شارك فكرتك في نهاية الحصة", "order": 1},
    {"id": "r_c8_s5_002", "subcategory_id": "c8_s5", "name": "توثيق لاستخدام استراتيجية رأيي مهم لجمع آراء الطلاب", "order": 2},
    {"id": "r_c8_s5_003", "subcategory_id": "c8_s5", "name": "تقرير عن تشجيع الطلاب على طرح الأسئلة وعدم السخرية من أسئلتهم", "order": 3},
    {"id": "r_c8_s5_004", "subcategory_id": "c8_s5", "name": "توثيق لإنشاء صندوق للاقتراحات في الفصل", "order": 4},
    {"id": "r_c8_s5_005", "subcategory_id": "c8_s5", "name": "تقرير عن إتاحة الفرصة للطلاب لتقديم عروض عن مواضيع يختارونها", "order": 5},
    {"id": "r_c8_s5_006", "subcategory_id": "c8_s5", "name": "توثيق لتنظيم مسابقة متحدث الفصل لطلاب المرحلة الابتدائية", "order": 6},
    {"id": "r_c8_s5_007", "subcategory_id": "c8_s5", "name": "تقرير عن إشراك الطلاب في اتخاذ قرارات الفصل", "order": 7},
    {"id": "r_c8_s5_008", "subcategory_id": "c8_s5", "name": "توثيق لعرض أعمال الطلاب ومشاركتها مع الزملاء", "order": 8},
    {"id": "r_c8_s5_009", "subcategory_id": "c8_s5", "name": "تقرير عن استخدام استراتيجية المشروع الحر", "order": 9},
    {"id": "r_c8_s5_010", "subcategory_id": "c8_s5", "name": "توثيق لتشجيع النقد البناء بين الطلاب في المناقشات", "order": 10},

    # ======================================================
    # c8_s6: إثارة دافعية المتعلمين
    # ======================================================
    {"id": "r_c8_s6_001", "subcategory_id": "c8_s6", "name": "تقرير عن استخدام الألعاب التعليمية والمسابقات لزيادة الحماس", "order": 1},
    {"id": "r_c8_s6_002", "subcategory_id": "c8_s6", "name": "توثيق لاستخدام القصص المشوقة لبداية الحصة", "order": 2},
    {"id": "r_c8_s6_003", "subcategory_id": "c8_s6", "name": "تقرير عن ربط الدروس بحياة الطلاب اليومية لزيادة الاهتمام", "order": 3},
    {"id": "r_c8_s6_004", "subcategory_id": "c8_s6", "name": "توثيق لاستخدام المكافآت العينية والرمزية", "order": 4},
    {"id": "r_c8_s6_005", "subcategory_id": "c8_s6", "name": "تقرير عن تنويع طرق الشرح", "order": 5},
    {"id": "r_c8_s6_006", "subcategory_id": "c8_s6", "name": "توثيق لإعطاء الطلاب مسؤوليات", "order": 6},
    {"id": "r_c8_s6_007", "subcategory_id": "c8_s6", "name": "تقرير عن استخدام أسلوب التحدي والألغاز في طرح الأسئلة", "order": 7},
    {"id": "r_c8_s6_008", "subcategory_id": "c8_s6", "name": "توثيق لتغيير مكان التعلم أحياناً", "order": 8},
    {"id": "r_c8_s6_009", "subcategory_id": "c8_s6", "name": "تقرير عن تقديم تغذية راجعة إيجابية ومحددة لكل طالب", "order": 9},
    {"id": "r_c8_s6_010", "subcategory_id": "c8_s6", "name": "توثيق لإشراك الطلاب في اختيار نوع النشاط أو المشروع", "order": 10},

    # ======================================================
    # c9_s1: وضع قواعد واضحة للسلوك في الصف
    # ======================================================
    {"id": "r_c9_s1_001", "subcategory_id": "c9_s1", "name": "تقرير عن مناقشة الطلاب في بداية العام لوضع قوانين الفصل", "order": 1},
    {"id": "r_c9_s1_002", "subcategory_id": "c9_s1", "name": "توثيق لكتابة القواعد الصفية وتعليقها في مكان بارز بالفصل", "order": 2},
    {"id": "r_c9_s1_003", "subcategory_id": "c9_s1", "name": "تقرير عن شرح عواقب مخالفة القواعد بشكل واضح للطلاب", "order": 3},
    {"id": "r_c9_s1_004", "subcategory_id": "c9_s1", "name": "توثيق لمراجعة القواعد بشكل دوري مع الطلاب", "order": 4},
    {"id": "r_c9_s1_005", "subcategory_id": "c9_s1", "name": "تقرير عن وضع إشارات بصرية للتذكير بالقواعد", "order": 5},
    {"id": "r_c9_s1_006", "subcategory_id": "c9_s1", "name": "توثيق لتخصيص حصة لمناقشة قواعد السلوك العامة في المدرسة", "order": 6},
    {"id": "r_c9_s1_007", "subcategory_id": "c9_s1", "name": "تقرير عن تطبيق القواعد بعدالة على جميع الطلاب", "order": 7},
    {"id": "r_c9_s1_008", "subcategory_id": "c9_s1", "name": "توثيق لتعزيز الطلاب الملتزمين بالقواعد أمام زملائهم", "order": 8},
    {"id": "r_c9_s1_009", "subcategory_id": "c9_s1", "name": "تقرير عن مناقشة تعديل قاعدة غير مناسبة مع الطلاب", "order": 9},
    {"id": "r_c9_s1_010", "subcategory_id": "c9_s1", "name": "توثيق لتوقيع الطلاب على تعهد بالالتزام بقوانين الفصل", "order": 10},

    # ======================================================
    # c9_s2: استخدام أساليب تحفيزية لتشجيع الطلاب على الالتزام
    # ======================================================
    {"id": "r_c9_s2_001", "subcategory_id": "c9_s2", "name": "تقرير عن تطبيق نظام النقاط والمكافآت للطلاب الملتزمين", "order": 1},
    {"id": "r_c9_s2_002", "subcategory_id": "c9_s2", "name": "توثيق لاستخدام بطاقات شكر وتقدير تقدم للطالب المثالي", "order": 2},
    {"id": "r_c9_s2_003", "subcategory_id": "c9_s2", "name": "تقرير عن تخصيص لوحة نجوم الفصل للطلاب ذوي السلوك الجيد", "order": 3},
    {"id": "r_c9_s2_004", "subcategory_id": "c9_s2", "name": "توثيق للثناء اللفظي على الطلاب", "order": 4},
    {"id": "r_c9_s2_005", "subcategory_id": "c9_s2", "name": "تقرير عن منح صلاحيات للطلاب الملتزمين", "order": 5},
    {"id": "r_c9_s2_006", "subcategory_id": "c9_s2", "name": "توثيق لإرسال رسائل إيجابية لأولياء الأمور عن سلوك أبنائهم", "order": 6},
    {"id": "r_c9_s2_007", "subcategory_id": "c9_s2", "name": "تقرير عن تخصيص وقت للعب أو نشاط حر كمكافأة جماعية", "order": 7},
    {"id": "r_c9_s2_008", "subcategory_id": "c9_s2", "name": "توثيق لتكريم الطلاب المثاليين في الإذاعة المدرسية", "order": 8},
    {"id": "r_c9_s2_009", "subcategory_id": "c9_s2", "name": "تقرير عن استخدام شارات أو أوسمة", "order": 9},
    {"id": "r_c9_s2_010", "subcategory_id": "c9_s2", "name": "توثيق لتحويل المنافسة بين المجموعات لتعزيز السلوك الإيجابي", "order": 10},

    # ======================================================
    # c9_s3: التعامل مع المشكلات السلوكية بشكل عادل وحازم
    # ======================================================
    {"id": "r_c9_s3_001", "subcategory_id": "c9_s3", "name": "تقرير عن تطبيق أسلوب النظرة العابسة أو الاقتراب لوقف السلوك البسيط", "order": 1},
    {"id": "r_c9_s3_002", "subcategory_id": "c9_s3", "name": "توثيق لتوجيه إنذار شفهي خاص لطالب مخالف للقواعد", "order": 2},
    {"id": "r_c9_s3_003", "subcategory_id": "c9_s3", "name": "تقرير عن عزل الطالب مؤقتاً داخل الفصل", "order": 3},
    {"id": "r_c9_s3_004", "subcategory_id": "c9_s3", "name": "توثيق لتطبيق العواقب المتفق عليها مسبقاً عند مخالفة القواعد", "order": 4},
    {"id": "r_c9_s3_005", "subcategory_id": "c9_s3", "name": "تقرير عن الاستماع لوجهة نظر الطالب قبل اتخاذ قرار بشأن المخالفة", "order": 5},
    {"id": "r_c9_s3_006", "subcategory_id": "c9_s3", "name": "توثيق لتحويل طالب لمشكلة سلوكية متكررة للمرشد الطلابي", "order": 6},
    {"id": "r_c9_s3_007", "subcategory_id": "c9_s3", "name": "تقرير عن التواصل مع ولي الأمر للتباحث حول حل مشكلة سلوكية", "order": 7},
    {"id": "r_c9_s3_008", "subcategory_id": "c9_s3", "name": "توثيق لتطبيق لائحة السلوك والمواظبة عند الضرورة", "order": 8},
    {"id": "r_c9_s3_009", "subcategory_id": "c9_s3", "name": "تقرير عن معالجة المشكلة فور حدوثها وعدم تأجيلها", "order": 9},
    {"id": "r_c9_s3_010", "subcategory_id": "c9_s3", "name": "توثيق للحزم في تطبيق القواعد دون تمييز أو محاباة", "order": 10},

    # ======================================================
    # c9_s4: تنظيم الوقت بشكل فعال خلال الحصة
    # ======================================================
    {"id": "r_c9_s4_001", "subcategory_id": "c9_s4", "name": "تقرير عن كتابة جدول زمني للحصة على السبورة", "order": 1},
    {"id": "r_c9_s4_002", "subcategory_id": "c9_s4", "name": "توثيق لاستخدام مؤقت على السبورة لضبط وقت الأنشطة", "order": 2},
    {"id": "r_c9_s4_003", "subcategory_id": "c9_s4", "name": "تقرير عن تجهيز الوسائل والمواد قبل بداية الحصة لتوفير الوقت", "order": 3},
    {"id": "r_c9_s4_004", "subcategory_id": "c9_s4", "name": "توثيق لبدء الحصة في الوقت المحدد دون إطالة للمقدمة", "order": 4},
    {"id": "r_c9_s4_005", "subcategory_id": "c9_s4", "name": "تقرير عن مراعاة تنوع الأنشطة بما يتناسب مع الوقت المخصص", "order": 5},
    {"id": "r_c9_s4_006", "subcategory_id": "c9_s4", "name": "توثيق لتكليف الطلاب بمهام واضحة ومحددة زمنياً", "order": 6},
    {"id": "r_c9_s4_007", "subcategory_id": "c9_s4", "name": "تقرير عن تخصيص الدقائق الأخيرة للمراجعة والختام", "order": 7},
    {"id": "r_c9_s4_008", "subcategory_id": "c9_s4", "name": "توثيق لإنهاء الحصة في الوقت المحدد وعدم الاستمرار بعد الجرس", "order": 8},
    {"id": "r_c9_s4_009", "subcategory_id": "c9_s4", "name": "تقرير عن تقليل الوقت الضائع في الانتقال بين الأنشطة", "order": 9},
    {"id": "r_c9_s4_010", "subcategory_id": "c9_s4", "name": "توثيق لاستخدام استراتيجيات سريعة لإدارة الوقت بكفاءة", "order": 10},

    # ======================================================
    # c10_s1: استخدام اختبارات تقييمية دورية
    # ======================================================
    {"id": "r_c10_s1_001", "subcategory_id": "c10_s1", "name": "تقرير عن تطبيق اختبار قبلي لقياس مدى معرفة الطلاب بالدرس الجديد", "order": 1},
    {"id": "r_c10_s1_002", "subcategory_id": "c10_s1", "name": "توثيق لنماذج من اختبارات قصيرة أسبوعية", "order": 2},
    {"id": "r_c10_s1_003", "subcategory_id": "c10_s1", "name": "تقرير عن تطبيق اختبارات شهرية لقياس نواتج التعلم للوحدة", "order": 3},
    {"id": "r_c10_s1_004", "subcategory_id": "c10_s1", "name": "توثيق لنتائج الاختبارات التشخيصية في بداية العام الدراسي", "order": 4},
    {"id": "r_c10_s1_005", "subcategory_id": "c10_s1", "name": "تقرير عن استخدام بطاقات الملاحظة لتقييم الأداء العملي", "order": 5},
    {"id": "r_c10_s1_006", "subcategory_id": "c10_s1", "name": "توثيق لتطبيق اختبارات تحريرية في منتصف الفصل الدراسي", "order": 6},
    {"id": "r_c10_s1_007", "subcategory_id": "c10_s1", "name": "تقرير عن تنفيذ اختبارات شفهية لقياس مهارات التحدث", "order": 7},
    {"id": "r_c10_s1_008", "subcategory_id": "c10_s1", "name": "توثيق لتطبيق اختبارات أدائية في المواد العملية", "order": 8},
    {"id": "r_c10_s1_009", "subcategory_id": "c10_s1", "name": "تقرير عن استخدام أوراق العمل كأداة تقييم تكويني مستمر", "order": 9},
    {"id": "r_c10_s1_010", "subcategory_id": "c10_s1", "name": "توثيق لتطبيق اختبارات إلكترونية تفاعلية عبر منصة مدرستي", "order": 10},

    # ======================================================
    # c10_s2: تحليل النتائج لتحديد نقاط القوة والضعف
    # ======================================================
    {"id": "r_c10_s2_001", "subcategory_id": "c10_s2", "name": "تقرير عن إعداد كشف تحليل لنتائج اختبار الفصل الدراسي", "order": 1},
    {"id": "r_c10_s2_002", "subcategory_id": "c10_s2", "name": "توثيق لاجتماع مع الطلاب لمناقشة نتائجهم في الاختبار بشكل عام", "order": 2},
    {"id": "r_c10_s2_003", "subcategory_id": "c10_s2", "name": "تقرير عن توضيح الأسئلة التي أخطأ فيها أغلب الطلاب وإعادة شرحها", "order": 3},
    {"id": "r_c10_s2_004", "subcategory_id": "c10_s2", "name": "توثيق لقاءات فردية مع الطلاب لتحليل أدائهم في الاختبارات", "order": 4},
    {"id": "r_c10_s2_005", "subcategory_id": "c10_s2", "name": "تقرير عن إشراك الطلاب في استخراج الدروس المستفادة من أخطائهم", "order": 5},
    {"id": "r_c10_s2_006", "subcategory_id": "c10_s2", "name": "توثيق لاستخدام الرسوم البيانية البسيطة لعرض نتائج الفصل", "order": 6},
    {"id": "r_c10_s2_007", "subcategory_id": "c10_s2", "name": "تقرير عن توجيه الطلاب لتحديد نقاط قوتهم وضعفهم بأنفسهم", "order": 7},
    {"id": "r_c10_s2_008", "subcategory_id": "c10_s2", "name": "توثيق لمناقشة تطور أداء الطالب مقارنة بالاختبار السابق", "order": 8},
    {"id": "r_c10_s2_009", "subcategory_id": "c10_s2", "name": "تقرير عن تحليل نتائج الواجبات الأسبوعية لتحديد المهارات غير المتقنة", "order": 9},
    {"id": "r_c10_s2_010", "subcategory_id": "c10_s2", "name": "توثيق لتحليل نتائج مجموعات الطلاب لتحديد المجموعات الأكثر احتياجاً", "order": 10},

    # ======================================================
    # c10_s3: توفير تغذية راجعة فردية للطلاب
    # ======================================================
    {"id": "r_c10_s3_001", "subcategory_id": "c10_s3", "name": "تقرير عن لقاء فردي مع طالب متميز لتوجيهه لمصادر إثرائية", "order": 1},
    {"id": "r_c10_s3_002", "subcategory_id": "c10_s3", "name": "توثيق لاجتماع مع طالب متعثر لمناقشة أسباب ضعفه ووضع خطة دعم", "order": 2},
    {"id": "r_c10_s3_003", "subcategory_id": "c10_s3", "name": "تقرير عن كتابة ملاحظات فردية على كراس كل طالب", "order": 3},
    {"id": "r_c10_s3_004", "subcategory_id": "c10_s3", "name": "توثيق لتخصيص وقت بعد الحصة لمناقشة طالب بشكل فردي", "order": 4},
    {"id": "r_c10_s3_005", "subcategory_id": "c10_s3", "name": "تقرير عن توجيه رسالة خاصة عبر منصة مدرستي لكل طالب", "order": 5},
    {"id": "r_c10_s3_006", "subcategory_id": "c10_s3", "name": "توثيق لتقديم تغذية راجعة شفهية خاصة لطالب خجول", "order": 6},
    {"id": "r_c10_s3_007", "subcategory_id": "c10_s3", "name": "تقرير عن مناقشة ولي أمر بحضور الطالب لتقديم تغذية راجعة مشتركة", "order": 7},
    {"id": "r_c10_s3_008", "subcategory_id": "c10_s3", "name": "توثيق لمراجعة ملف الإنجاز الخاص بكل طالب وتقديم ملاحظات عليه", "order": 8},
    {"id": "r_c10_s3_009", "subcategory_id": "c10_s3", "name": "تقرير عن توجيه الطالب لخطوات محددة لتحسين مستواه", "order": 9},
    {"id": "r_c10_s3_010", "subcategory_id": "c10_s3", "name": "توثيق لاستخدام بطاقات التغذية الراجعة الجاهزة لكل طالب", "order": 10},

    # ======================================================
    # c10_s4: تطبيق خطط علاجية للطلاب الذين يحتاجون إلى دعم
    # ======================================================
    {"id": "r_c10_s4_001", "subcategory_id": "c10_s4", "name": "تقرير عن إعداد خطة علاجية للطلاب المتعثرين", "order": 1},
    {"id": "r_c10_s4_002", "subcategory_id": "c10_s4", "name": "توثيق لتنفيذ حصص تقوية بعد الدوام الرسمي للطلاب الضعاف", "order": 2},
    {"id": "r_c10_s4_003", "subcategory_id": "c10_s4", "name": "تقرير عن تصميم أوراق عمل علاجية للمهارات الأساسية", "order": 3},
    {"id": "r_c10_s4_004", "subcategory_id": "c10_s4", "name": "توثيق لتوزيع الطلاب الضعاف على مجموعات دعم داخل الفصل", "order": 4},
    {"id": "r_c10_s4_005", "subcategory_id": "c10_s4", "name": "تقرير عن متابعة تطور الطالب في الخطة العلاجية أسبوعياً", "order": 5},
    {"id": "r_c10_s4_006", "subcategory_id": "c10_s4", "name": "توثيق للتعاون مع المرشد الطلابي في وضع خطة للطلاب بطيئي التعلم", "order": 6},
    {"id": "r_c10_s4_007", "subcategory_id": "c10_s4", "name": "تقرير عن إشراك ولي الأمر في تنفيذ الخطة العلاجية بالمنزل", "order": 7},
    {"id": "r_c10_s4_008", "subcategory_id": "c10_s4", "name": "توثيق لتعديل الخطة العلاجية بناءً على نتائج التقييم المستمر", "order": 8},
    {"id": "r_c10_s4_009", "subcategory_id": "c10_s4", "name": "تقرير عن استخدام برامج محوسبة لدعم الخطة العلاجية", "order": 9},
    {"id": "r_c10_s4_010", "subcategory_id": "c10_s4", "name": "توثيق لتقييم الخطة العلاجية في نهاية الفصل وقياس مدى نجاحها", "order": 10},

    # ======================================================
    # c10_s5: قياس التطبيق العملي للمعرفة عبر مواقف حقيقية
    # ======================================================
    {"id": "r_c10_s5_001", "subcategory_id": "c10_s5", "name": "تقرير عن تقييم مشروع تصميم مجسم تعليمي", "order": 1},
    {"id": "r_c10_s5_002", "subcategory_id": "c10_s5", "name": "توثيق لتقييم عروض تقديمية لطلاب الثانوي عن قضايا معاصرة", "order": 2},
    {"id": "r_c10_s5_003", "subcategory_id": "c10_s5", "name": "تقرير عن تقييم أداء الطلاب في معرض المواهب المدرسي", "order": 3},
    {"id": "r_c10_s5_004", "subcategory_id": "c10_s5", "name": "توثيق لتقييم تطبيق عملي للتجارب في المعامل", "order": 4},
    {"id": "r_c10_s5_005", "subcategory_id": "c10_s5", "name": "تقرير عن تقييم مهارة الإلقاء والتحدث أمام الجمهور", "order": 5},
    {"id": "r_c10_s5_006", "subcategory_id": "c10_s5", "name": "توثيق لتقييم مشاركة الطلاب في المسابقات المدرسية", "order": 6},
    {"id": "r_c10_s5_007", "subcategory_id": "c10_s5", "name": "تقرير عن تقييم مشاريع خدمة المجتمع التي نفذها طلاب الثانوي", "order": 7},
    {"id": "r_c10_s5_008", "subcategory_id": "c10_s5", "name": "توثيق لتقييم أداء الطلاب في تمثيل مشهد مسرحي", "order": 8},
    {"id": "r_c10_s5_009", "subcategory_id": "c10_s5", "name": "تقرير عن تقييم ملفات الإنجاز التي تعكس تطور الطالب", "order": 9},
    {"id": "r_c10_s5_010", "subcategory_id": "c10_s5", "name": "توثيق لتقييم مشاركة الطلاب في محاكاة لمؤتمر أو قمة", "order": 10},

    # ======================================================
    # c11_s1: استخدام الاختبارات الكتابية والشفوية
    # ======================================================
    {"id": "r_c11_s1_001", "subcategory_id": "c11_s1", "name": "تقرير عن تطبيق اختبار كتابي تحريري نهاية كل وحدة دراسية", "order": 1},
    {"id": "r_c11_s1_002", "subcategory_id": "c11_s1", "name": "توثيق لنماذج من أسئلة الاختبارات القصيرة الأسبوعية", "order": 2},
    {"id": "r_c11_s1_003", "subcategory_id": "c11_s1", "name": "تقرير عن إجراء اختبارات شفهية لقياس مهارات الحفظ والتحدث", "order": 3},
    {"id": "r_c11_s1_004", "subcategory_id": "c11_s1", "name": "توثيق لتنويع أسئلة الاختبارات الكتابية", "order": 4},
    {"id": "r_c11_s1_005", "subcategory_id": "c11_s1", "name": "تقرير عن تطبيق اختبارات إلكترونية", "order": 5},
    {"id": "r_c11_s1_006", "subcategory_id": "c11_s1", "name": "توثيق لاستخدام بطاقات الأسئلة في الاختبارات الشفوية", "order": 6},
    {"id": "r_c11_s1_007", "subcategory_id": "c11_s1", "name": "تقرير عن تصميم اختبار كتابي يراعي مستويات الطلاب", "order": 7},
    {"id": "r_c11_s1_008", "subcategory_id": "c11_s1", "name": "توثيق لتطبيق اختبار شفهي جماعي في نهاية الحصة", "order": 8},
    {"id": "r_c11_s1_009", "subcategory_id": "c11_s1", "name": "تقرير عن استخدام السبورة الشخصية للاختبارات الشفوية السريعة", "order": 9},
    {"id": "r_c11_s1_010", "subcategory_id": "c11_s1", "name": "توثيق لتصحيح الاختبارات الكتابية وإعادتها للطلاب بملاحظات", "order": 10},

    # ======================================================
    # c11_s2: تطبيق التقييم العملي من خلال المشاريع والعروض
    # ======================================================
    {"id": "r_c11_s2_001", "subcategory_id": "c11_s2", "name": "تقرير عن تقييم مشروع البحث العلمي لطلاب المرحلة الثانوية", "order": 1},
    {"id": "r_c11_s2_002", "subcategory_id": "c11_s2", "name": "توثيق لتقييم عروض البوربوينت التي أعدها الطلاب", "order": 2},
    {"id": "r_c11_s2_003", "subcategory_id": "c11_s2", "name": "تقرير عن تقييم المشاريع الفنية لطلاب الابتدائي", "order": 3},
    {"id": "r_c11_s2_004", "subcategory_id": "c11_s2", "name": "توثيق لتقييم أداء الطلاب في المعارض العلمية بالمدرسة", "order": 4},
    {"id": "r_c11_s2_005", "subcategory_id": "c11_s2", "name": "تقرير عن تقييم مشروع إعادة التدوير", "order": 5},
    {"id": "r_c11_s2_006", "subcategory_id": "c11_s2", "name": "توثيق لتقييم العروض المسرحية", "order": 6},
    {"id": "r_c11_s2_007", "subcategory_id": "c11_s2", "name": "تقرير عن تقييم مشروع الخطة التسويقية لطلاب الثانوي", "order": 7},
    {"id": "r_c11_s2_008", "subcategory_id": "c11_s2", "name": "توثيق لتقييم تجارب عملية في المعامل", "order": 8},
    {"id": "r_c11_s2_009", "subcategory_id": "c11_s2", "name": "تقرير عن تقييم مشاريع ريادة الأعمال المصغرة", "order": 9},
    {"id": "r_c11_s2_010", "subcategory_id": "c11_s2", "name": "توثيق لتقييم إنتاج محتوى رقمي من قبل الطلاب", "order": 10},

    # ======================================================
    # c11_s3: استخدام التقييم التكويني لتتبع تقدم الطلاب
    # ======================================================
    {"id": "r_c11_s3_001", "subcategory_id": "c11_s3", "name": "تقرير عن استخدام أوراق العمل اليومية كأداة تقييم تكويني", "order": 1},
    {"id": "r_c11_s3_002", "subcategory_id": "c11_s3", "name": "توثيق لاستخدام بطاقات الخروج في نهاية الحصة", "order": 2},
    {"id": "r_c11_s3_003", "subcategory_id": "c11_s3", "name": "تقرير عن استخدام استراتيجية الإشارة باليد لقياس الفهم أثناء الشرح", "order": 3},
    {"id": "r_c11_s3_004", "subcategory_id": "c11_s3", "name": "توثيق لملاحظاتي اليومية المسجلة في دفتر متابعة الطلاب", "order": 4},
    {"id": "r_c11_s3_005", "subcategory_id": "c11_s3", "name": "تقرير عن استخدام بطاقات الملاحظة أثناء الأنشطة الجماعية", "order": 5},
    {"id": "r_c11_s3_006", "subcategory_id": "c11_s3", "name": "توثيق لتصحيح الواجبات اليومية وتدوين نتائجها", "order": 6},
    {"id": "r_c11_s3_007", "subcategory_id": "c11_s3", "name": "تقرير عن استخدام المناقشات الصفية كمؤشر لفهم الطلاب", "order": 7},
    {"id": "r_c11_s3_008", "subcategory_id": "c11_s3", "name": "توثيق لتطبيق اختبارات قصيرة أسبوعية لقياس التقدم", "order": 8},
    {"id": "r_c11_s3_009", "subcategory_id": "c11_s3", "name": "تقرير عن استخدام سجل الإتقان لتسجيل المهارات التي أتقنها كل طالب", "order": 9},
    {"id": "r_c11_s3_010", "subcategory_id": "c11_s3", "name": "توثيق لاستخدام القبعة الصفراء في استراتيجية القبعات الست لقياس الإيجابيات", "order": 10},

    # ======================================================
    # c11_s4: استخدام التقويم القبلي
    # ======================================================
    {"id": "r_c11_s4_001", "subcategory_id": "c11_s4", "name": "تقرير عن تطبيق اختبار قبلي في أول العام الدراسي لتشخيص المستوى", "order": 1},
    {"id": "r_c11_s4_002", "subcategory_id": "c11_s4", "name": "توثيق لاستخدام أسئلة ماذا تعرف عن؟ في بداية كل وحدة", "order": 2},
    {"id": "r_c11_s4_003", "subcategory_id": "c11_s4", "name": "تقرير عن إجراء عصف ذهني قبلي لاستخراج الخبرات السابقة للطلاب", "order": 3},
    {"id": "r_c11_s4_004", "subcategory_id": "c11_s4", "name": "توثيق لاستخدام استراتيجية الرسم التخطيطي لتمثيل المعرفة السابقة", "order": 4},
    {"id": "r_c11_s4_005", "subcategory_id": "c11_s4", "name": "تقرير عن توجيه أسئلة شفهية سريعة لمعرفة مدى استعداد الطلاب للدرس", "order": 5},
    {"id": "r_c11_s4_006", "subcategory_id": "c11_s4", "name": "توثيق لاستخدام استبيان قبلي بسيط عن الموضوع", "order": 6},
    {"id": "r_c11_s4_007", "subcategory_id": "c11_s4", "name": "تقرير عن تصميم بطاقة قائمة التأكد من المهارات الأساسية السابقة", "order": 7},
    {"id": "r_c11_s4_008", "subcategory_id": "c11_s4", "name": "توثيق لمراجعة مهارات العام السابق قبل البدء بدرس جديد", "order": 8},
    {"id": "r_c11_s4_009", "subcategory_id": "c11_s4", "name": "تقرير عن استخدام خرائط المفاهيم لربط المعرفة الجديدة بالقديمة", "order": 9},
    {"id": "r_c11_s4_010", "subcategory_id": "c11_s4", "name": "توثيق لمناقشة الطلاب في خبراتهم الحياتية المرتبطة بالدرس", "order": 10},

    # ======================================================
    # c11_s5: تطبيق التقويم الختامي
    # ======================================================
    {"id": "r_c11_s5_001", "subcategory_id": "c11_s5", "name": "تقرير عن تطبيق اختبار نهاية الفصل الدراسي الأول", "order": 1},
    {"id": "r_c11_s5_002", "subcategory_id": "c11_s5", "name": "توثيق لنتائج الاختبارات النهائية المحللة", "order": 2},
    {"id": "r_c11_s5_003", "subcategory_id": "c11_s5", "name": "تقرير عن تطبيق مشروع ختامي شامل يقيّم نواتج التعلم للفصل", "order": 3},
    {"id": "r_c11_s5_004", "subcategory_id": "c11_s5", "name": "توثيق لتطبيق اختبارات نهاية الوحدة التحريرية", "order": 4},
    {"id": "r_c11_s5_005", "subcategory_id": "c11_s5", "name": "تقرير عن إصدار أحكام مستوية بناءً على أداء الطالب في الاختبارات", "order": 5},
    {"id": "r_c11_s5_006", "subcategory_id": "c11_s5", "name": "توثيق لاستخدام سجل الدرجات النهائي لرصد نتائج التقويم الختامي", "order": 6},
    {"id": "r_c11_s5_007", "subcategory_id": "c11_s5", "name": "تقرير عن إعداد تقرير ختامي لمستوى الفصل في المادة", "order": 7},
    {"id": "r_c11_s5_008", "subcategory_id": "c11_s5", "name": "توثيق لمقارنة نتائج التقويم الختامي بنتائج التقويم القبلي", "order": 8},
    {"id": "r_c11_s5_009", "subcategory_id": "c11_s5", "name": "تقرير عن تحليل مدى تحقيق الأهداف العامة للمنهج من خلال الاختبارات النهائية", "order": 9},
    {"id": "r_c11_s5_010", "subcategory_id": "c11_s5", "name": "توثيق لتسليم كشوف الدرجات النهائية للإدارة", "order": 10}
]

# إدارات التعليم
EDUCATION_OFFICES = [
    "الإدارة العامة للتعليم بمنطقة مكة المكرمة",
    "الإدارة العامة للتعليم بمنطقة الرياض",
    "الإدارة العامة للتعليم بمنطقة المدينة المنورة",
    "الإدارة العامة للتعليم بالمنطقة الشرقية",
    "الإدارة العامة للتعليم بمنطقة القصيم",
    "الإدارة العامة للتعليم بمنطقة عسير",
    "الإدارة العامة للتعليم بمنطقة تبوك",
    "الإدارة العامة للتعليم بمنطقة حائل",
    "الإدارة العامة للتعليم بمنطقة الحدود الشمالية",
    "الإدارة العامة للتعليم بمنطقة جازان",
    "الإدارة العامة للتعليم بمنطقة نجران",
    "الإدارة العامة للتعليم بمنطقة الباحة",
    "الإدارة العامة للتعليم بمنطقة الجوف",
    "الإدارة العامة للتعليم بمحافظة الأحساء",
    "الإدارة العامة للتعليم بمحافظة الطائف",
    "الإدارة العامة للتعليم بمحافظة جدة"
]

# المواد الدراسية
SCHOOL_SUBJECTS = [
    "القرآن الكريم",
    "الدراسات الإسلامية",
    "اللغة العربية",
    "الرياضيات",
    "العلوم",
    "الدراسات الاجتماعية",
    "اللغة الإنجليزية",
    "التربية الفنية",
    "التربية البدنية",
    "المهارات الرقمية",
    "المهارات الحياتية والأسرية",
    "التفكير الناقد",
    "التربية المهنية"
]

# الصفوف الدراسية
SCHOOL_GRADES = [
    "الصف الأول الابتدائي",
    "الصف الثاني الابتدائي",
    "الصف الثالث الابتدائي",
    "الصف الرابع الابتدائي",
    "الصف الخامس الابتدائي",
    "الصف السادس الابتدائي",
    "الصف الأول المتوسط",
    "الصف الثاني المتوسط",
    "الصف الثالث المتوسط",
    "الصف الأول الثانوي",
    "الصف الثاني الثانوي",
    "الصف الثالث الثانوي"
]

# المستهدفون
TARGET_AUDIENCES = [
    "الطلاب",
    "المعلمون",
    "أولياء الأمور",
    "المجتمع المحلي",
    "الإدارة المدرسية",
    "الموهوبون",
    "طلاب صعوبات التعلم",
    "الطلاب المتفوقون",
    "الطلاب المتعثرون"
]

# أماكن التنفيذ
IMPLEMENTATION_PLACES = [
    "قاعة الدرس",
    "مصادر التعلم",
    "مختبر العلوم",
    "معمل الحاسب",
    "ساحة المدرسة",
    "المكتبة",
    "قاعة النشاط",
    "المسرح المدرسي",
    "الفصول الافتراضية",
    "الملعب الرياضي"
]

# الأدوات والوسائل التعليمية
EDUCATIONAL_TOOLS = [
    "سبورة",
    "سبورة ذكية",
    "جهاز عرض",
    "أوراق عمل",
    "حاسب",
    "عرض تقديمي",
    "بطاقات تعليمية",
    "صور توضيحية",
    "كتاب",
    "أدوات رياضية",
    "جهاز لوحي",
    "منصة مدرستي",
    "نظام نور",
    "تطبيقات تعليمية",
    "فيديو تعليمي"
]

# ---------- برومبت الذكاء الاصطناعي ----------
AI_PROMPT_TEMPLATE = """أنت خبير تربوي تعليمي محترف تمتلك خبرة ميدانية واسعة في التعليم العام.  
اعتمد منظورًا تربويًا مهنيًا احترافيًا يركّز على تحسين جودة التعليم، ودعم المعلم، وتعزيز بيئة التعلّم، وخدمة القيادة المدرسية.  

التقرير المطلوب: "{report_name}"
وهو يندرج تحت التصنيف الفرعي: "{subcategory_name}"
ضمن المعيار التربوي: "{criterion_name}"

{subject_line}
{lesson_line}
{grade_line}
{target_line}
{place_line}
{count_line}

**توجيهات مهنية:**
- كن موضوعيًا ومتزنًا وبنّاءً  
- قدّم الملاحظات بصيغة تطويرية غير نقدية  
- راعِ واقع الميدان التعليمي وسياق المدرسة  
- اربط بين المعلم والطالب والمنهج والبيئة الصفية والقيادة المدرسية  
- ركّز على جودة التعليم وأثر الممارسات على تعلم الطلاب  
- التزم بلغة عربية فصيحة سليمة وخالية من الأخطاء  
- اجعل المحتوى وكأنه تقرير مقدم من معلم عن ممارسة فعلية قام بها

**شروط المحتوى:**
اكتب محتوى كل حقل بصيغة تقريرية مهنية وكأنه صادر عن المعلم.
لا تكتب أبداً عنوان الحقل داخل المحتوى ولا تعِد صياغته بصيغة مباشرة.
يجب أن يحتوي كل حقل على ما يقارب 25 كلمة.
ابدأ بالمضمون مباشرة دون تمهيد أو عبارات إنشائية.
احرص على وجود ترابط منطقي بين الحقول المطلوبة.
اجعل الهدف النهائي للمحتوى تحسين الممارسة التعليمية ودعم التطوير المهني المستدام.
راعِ الوضوح والترابط، واجعل كل جملة تضيف قيمة تعليمية فعلية.

**الحقول المطلوبة:**
1. الهدف التربوي
2. نبذة مختصرة  
3. إجراءات التنفيذ
4. الاستراتيجيات المستخدمة
5. نقاط القوة
6. نقاط التحسين
7. التوصيات

يرجى تقديم الإجابة باللغة العربية الفصحى، وتنظيمها بحيث يكون كل حقل في سطر منفصل يبدأ برقمه فقط دون ذكر العنوان."""

def build_ai_prompt(report_name: str, subcategory_name: str, criterion_name: str, report_data: dict = None):
    """بناء البرومت المناسب للذكاء الاصطناعي"""
    if not report_data:
        report_data = {}
    
    subject_line = f"المادة: {report_data.get('subject', '')}" if report_data.get('subject') else ""
    lesson_line = f"الدرس: {report_data.get('lesson', '')}" if report_data.get('lesson') else ""
    grade_line = f"الصف: {report_data.get('grade', '')}" if report_data.get('grade') else ""
    target_line = f"المستهدفون: {report_data.get('target', '')}" if report_data.get('target') else ""
    place_line = f"مكان التنفيذ: {report_data.get('place', '')}" if report_data.get('place') else ""
    count_line = f"عدد الحضور: {report_data.get('count', '')}" if report_data.get('count') else ""
    
    return AI_PROMPT_TEMPLATE.format(
        report_name=report_name,
        subcategory_name=subcategory_name,
        criterion_name=criterion_name,
        subject_line=subject_line,
        lesson_line=lesson_line,
        grade_line=grade_line,
        target_line=target_line,
        place_line=place_line,
        count_line=count_line
    )

# ============================================================================
# دوال مساعدة للبحث في البيانات
# ============================================================================

def get_criterion_by_id(criterion_id: str):
    """الحصول على معيار تربوي حسب المعرف"""
    for criterion in CRITERIA:
        if criterion["id"] == criterion_id:
            return criterion
    return None

def get_subcategory_by_id(subcategory_id: str):
    """الحصول على تصنيف فرعي حسب المعرف"""
    for subcategory in SUBCATEGORIES:
        if subcategory["id"] == subcategory_id:
            return subcategory
    return None

def get_report_by_id(report_id: str):
    """الحصول على تقرير حسب المعرف"""
    for report in REPORTS:
        if report["id"] == report_id:
            return report
    return None

def get_subcategories_by_criterion(criterion_id: str):
    """الحصول على جميع التصنيفات الفرعية لمعيار معين"""
    return [s for s in SUBCATEGORIES if s["criterion_id"] == criterion_id]

def get_reports_by_subcategory(subcategory_id: str):
    """الحصول على جميع التقارير لتصنيف فرعي معين"""
    return [r for r in REPORTS if r["subcategory_id"] == subcategory_id]

# ============================================================================
# المسارات (Routes)
# ============================================================================

@app.get("/")
def root():
    return {"status": "running", "message": "Teacher Reports API"}

@app.get("/health")
def health(_: int = Depends(activation_required)):
    return {"status": "ok"}

# ---------- مسارات الاشتراك ----------
@app.get("/subscription/status")
def subscription_status(code_id: int = Depends(activation_required)):
    conn = get_connection()
    cur = conn.cursor()

    cur.execute("""
        SELECT
            expires_at,
            usage_limit,
            usage_count
        FROM activation_codes
        WHERE id = ?
    """, (code_id,))
    row = cur.fetchone()
    conn.close()

    if not row:
        raise HTTPException(status_code=404, detail="Subscription not found")

    expires_at, usage_limit, usage_count = row
    now = datetime.utcnow()

    expired = False
    if expires_at and datetime.fromisoformat(expires_at) < now:
        expired = True
    if usage_limit is not None and usage_count >= usage_limit:
        expired = True

    return {
        "expires_at": expires_at,
        "usage_limit": usage_limit,
        "usage_used": usage_count,
        "usage_remaining": (
            max(usage_limit - usage_count, 0)
            if usage_limit is not None else None
        ),
        "expired": expired
    }

# ---------- المسار الرئيسي للذكاء الاصطناعي ----------
@app.post("/ask")
def ask(
    req: Req,
    code_id: int = Depends(activation_required)
):
    conn = get_connection()
    cur = conn.cursor()

    cur.execute("""
        UPDATE activation_codes
        SET usage_count = usage_count + 1,
            last_used_at = ?
        WHERE id = ?
    """, (datetime.utcnow().isoformat(), code_id))

    conn.commit()
    conn.close()

    genai.configure(api_key=get_api_key())
    model = genai.GenerativeModel("models/gemini-2.5-flash-lite")
    response = model.generate_content(req.prompt)

    return {"answer": response.text}

# ---------- مسارات البيانات الجديدة ----------

@app.get("/api/criteria")
def get_all_criteria():
    """جلب جميع المعايير التربوية"""
    return {"criteria": CRITERIA}

@app.get("/api/criteria/{criterion_id}")
def get_criterion(criterion_id: str):
    """جلب معيار تربوي محدد"""
    criterion = get_criterion_by_id(criterion_id)
    if not criterion:
        raise HTTPException(status_code=404, detail="Criterion not found")
    return criterion

@app.get("/api/criteria/{criterion_id}/subcategories")
def get_subcategories(criterion_id: str):
    """جلب جميع التصنيفات الفرعية لمعيار معين"""
    criterion = get_criterion_by_id(criterion_id)
    if not criterion:
        raise HTTPException(status_code=404, detail="Criterion not found")
    
    subcategories = get_subcategories_by_criterion(criterion_id)
    return {
        "criterion": criterion,
        "subcategories": subcategories
    }

@app.get("/api/subcategories/{subcategory_id}")
def get_subcategory(subcategory_id: str):
    """جلب تصنيف فرعي محدد"""
    subcategory = get_subcategory_by_id(subcategory_id)
    if not subcategory:
        raise HTTPException(status_code=404, detail="Subcategory not found")
    return subcategory

@app.get("/api/subcategories/{subcategory_id}/reports")
def get_reports(subcategory_id: str):
    """جلب جميع التقارير لتصنيف فرعي معين"""
    subcategory = get_subcategory_by_id(subcategory_id)
    if not subcategory:
        raise HTTPException(status_code=404, detail="Subcategory not found")
    
    reports = get_reports_by_subcategory(subcategory_id)
    return {
        "subcategory": subcategory,
        "reports": reports
    }

@app.get("/api/reports/{report_id}")
def get_report(report_id: str):
    """جلب تقرير محدد"""
    report = get_report_by_id(report_id)
    if not report:
        raise HTTPException(status_code=404, detail="Report not found")
    
    subcategory = get_subcategory_by_id(report["subcategory_id"])
    criterion = None
    if subcategory:
        criterion = get_criterion_by_id(subcategory["criterion_id"])
    
    return {
        "report": report,
        "subcategory": subcategory,
        "criterion": criterion
    }

@app.get("/api/full-structure")
def get_full_structure():
    """جلب الهيكل الكامل (معايير + تصنيفات فرعية + تقارير)"""
    result = []
    for criterion in CRITERIA:
        criterion_data = criterion.copy()
        subcategories = get_subcategories_by_criterion(criterion["id"])
        criterion_data["subcategories"] = []
        
        for subcategory in subcategories:
            subcategory_data = subcategory.copy()
            reports = get_reports_by_subcategory(subcategory["id"])
            subcategory_data["reports"] = reports
            criterion_data["subcategories"].append(subcategory_data)
        
        result.append(criterion_data)
    
    return {"structure": result}

# ---------- مسارات البيانات الإضافية ----------
@app.get("/api/education-offices")
def get_education_offices():
    """جلب جميع إدارات التعليم"""
    return EDUCATION_OFFICES

@app.get("/api/school-subjects")
def get_school_subjects():
    """جلب جميع المواد الدراسية"""
    return SCHOOL_SUBJECTS

@app.get("/api/school-grades")
def get_school_grades():
    """جلب جميع الصفوف الدراسية"""
    return SCHOOL_GRADES

@app.get("/api/target-audiences")
def get_target_audiences():
    """جلب جميع الفئات المستهدفة"""
    return TARGET_AUDIENCES

@app.get("/api/implementation-places")
def get_implementation_places():
    """جلب جميع أماكن التنفيذ"""
    return IMPLEMENTATION_PLACES

@app.get("/api/educational-tools")
def get_educational_tools():
    """جلب جميع الأدوات التعليمية"""
    return EDUCATIONAL_TOOLS

@app.get("/api/search-reports")
def search_reports(q: str = Query(..., min_length=2)):
    """البحث في التقارير"""
    results = []
    q_lower = q.lower()
    
    for report in REPORTS:
        if q_lower in report["name"].lower():
            subcategory = get_subcategory_by_id(report["subcategory_id"])
            criterion = None
            if subcategory:
                criterion = get_criterion_by_id(subcategory["criterion_id"])
            
            results.append({
                "report": report,
                "subcategory_name": subcategory["name"] if subcategory else None,
                "criterion_name": criterion["name"] if criterion else None
            })
    
    return {"results": results[:20]}

# ---------- مسار توليد محتوى التقرير ----------
@app.post("/api/generate-report-content")
def generate_report_content(
    req: GenerateReportRequest,
    code_id: int = Depends(activation_required)
):
    """
    توليد محتوى التقرير باستخدام الذكاء الاصطناعي
    """
    report = get_report_by_id(req.report_id)
    if not report:
        raise HTTPException(status_code=404, detail="Report not found")
    
    subcategory = get_subcategory_by_id(req.subcategory_id)
    if not subcategory:
        raise HTTPException(status_code=404, detail="Subcategory not found")
    
    if report["subcategory_id"] != req.subcategory_id:
        raise HTTPException(status_code=400, detail="Report does not belong to this subcategory")
    
    criterion = get_criterion_by_id(req.criterion_id)
    if not criterion:
        raise HTTPException(status_code=404, detail="Criterion not found")
    
    if subcategory["criterion_id"] != req.criterion_id:
        raise HTTPException(status_code=400, detail="Subcategory does not belong to this criterion")
    
    prompt = build_ai_prompt(
        report_name=report["name"],
        subcategory_name=subcategory["name"],
        criterion_name=criterion["name"],
        report_data=req.report_data
    )
    
    conn = get_connection()
    cur = conn.cursor()
    
    cur.execute("""
        UPDATE activation_codes
        SET usage_count = usage_count + 1,
            last_used_at = ?
        WHERE id = ?
    """, (datetime.utcnow().isoformat(), code_id))
    
    conn.commit()
    conn.close()
    
    genai.configure(api_key=get_api_key())
    model = genai.GenerativeModel("models/gemini-2.5-flash-lite")
    response = model.generate_content(prompt)
    
    return {
        "content": response.text,
        "report_id": req.report_id,
        "report_name": report["name"],
        "subcategory_name": subcategory["name"],
        "criterion_name": criterion["name"],
        "generated_at": datetime.utcnow().isoformat()
    }

# ---------- Admin APIs ----------
@app.post("/admin/generate", dependencies=[Depends(admin_auth)])
def admin_generate(req: GenerateKeyReq):
    if req.plan not in PLANS:
        raise HTTPException(status_code=400, detail="Invalid plan")

    plan = PLANS[req.plan]
    now = datetime.utcnow()
    expires_at = now

    if "minutes" in plan:
        expires_at += timedelta(minutes=plan["minutes"])
    if "days" in plan:
        expires_at += timedelta(days=plan["days"])

    return {
        "code": create_key(
            expires_at.isoformat(),
            plan["usage"]
        ),
        "expires_at": expires_at.isoformat(),
        "usage_limit": plan["usage"]
    }

@app.get("/admin/codes", dependencies=[Depends(admin_auth)])
def admin_codes():
    conn = get_connection()
    cur = conn.cursor()
    cur.execute("""
        SELECT
            id,
            code,
            is_active,
            expires_at,
            usage_limit,
            usage_count
        FROM activation_codes
    """)
    rows = cur.fetchall()
    conn.close()

    now = datetime.utcnow()
    result = []

    for r in rows:
        expired = False
        if r[3] and datetime.fromisoformat(r[3]) < now:
            expired = True
        if r[4] is not None and r[5] >= r[4]:
            expired = True

        result.append({
            "id": r[0],
            "code": r[1],
            "active": bool(r[2]),
            "expires_at": r[3],
            "usage_limit": r[4],
            "usage_count": r[5],
            "expired": expired
        })

    return result

@app.put("/admin/code/{code_id}/toggle", dependencies=[Depends(admin_auth)])
def admin_toggle(code_id: int):
    conn = get_connection()
    cur = conn.cursor()
    cur.execute("""
        UPDATE activation_codes
        SET is_active = CASE WHEN is_active=1 THEN 0 ELSE 1 END
        WHERE id = ?
    """, (code_id,))
    conn.commit()
    conn.close()
    return {"status": "ok"}

@app.delete("/admin/code/{code_id}", dependencies=[Depends(admin_auth)])
def admin_delete(code_id: int):
    conn = get_connection()
    cur = conn.cursor()
    cur.execute("DELETE FROM activation_codes WHERE id=?", (code_id,))
    conn.commit()
    conn.close()
    return {"status": "deleted"}

# ---------- Admin Panel ----------
@app.get("/admin/panel", response_class=HTMLResponse)
def admin_panel():
    return Path("admin.html").read_text(encoding="utf-8")